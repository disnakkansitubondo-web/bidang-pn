<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - Dinas Peternakan dan Perikanan Situbondo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .password-modal .modal-content {
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            border: none;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Welcome notification styles - IMPROVED PREMIUM */
        .welcome-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, #0d47a1 0%, #082e5c 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            z-index: 2000;
            text-align: center;
            width: 90%;
            max-width: 650px;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            overflow: hidden;
        }
        
        .welcome-notification::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 65%);
            pointer-events: none;
            animation: rotateGradient 15s linear infinite;
        }
        
        .welcome-notification.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .welcome-notification h3 {
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 2.2rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }
        
        .welcome-notification p {
            margin-bottom: 15px;
            font-size: 1.2rem;
            line-height: 1.6;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .welcome-notification .icon {
            font-size: 4rem;
            margin-bottom: 25px;
            color: #ff8f00;
            text-shadow: 0 2px 12px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
            animation: pulse 2s infinite;
        }
        
        .welcome-notification .btn-close-welcome {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 3;
        }
        
        .welcome-notification .btn-close-welcome:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        .welcome-notification .highlight {
            color: #ff8f00;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .welcome-notification .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes rotateGradient {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Particle Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        /* Responsive styles */
        @media (max-width: 1200px) {
            .app-title {
                font-size: 1.6rem;
            }
            
            .app-logo {
                font-size: 2.2rem;
            }
            
            .stats-number {
                font-size: 1.6rem;
            }
        }
        
        @media (max-width: 992px) {
            .app-title {
                font-size: 1.4rem;
            }
            
            .app-logo {
                font-size: 2rem;
            }
            
            .stats-number {
                font-size: 1.4rem;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                position: fixed;
                top: 0;
                left: -300px;
                width: 280px;
                height: 100vh;
                z-index: 1050;
                overflow-y: auto;
                transition: left 0.3s ease;
                padding: 20px 15px !important;
            }
            
            .sidebar-open .col-md-3.col-lg-2.p-4.bg-light {
                left: 0;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .col-md-9.col-lg-10.p-5 {
                padding: 15px !important;
            }
        }
        
        @media (max-width: 768px) {
            .app-title {
                font-size: 1.3rem;
            }
            
            .app-logo {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
            
            .stats-box {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .floating-action-btn {
                bottom: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
            }
            
            .col-md-9.col-lg-10.p-5 {
                padding: 10px !important;
            }
            
            .app-header {
                padding: 15px 10px;
            }
            
            .data-table {
                font-size: 0.8rem;
            }
            
            .data-table th, .data-table td {
                padding: 8px 5px;
            }
            
            .btn-group .btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .welcome-notification {
                padding: 25px 20px;
            }
            
            .welcome-notification h3 {
                font-size: 1.8rem;
            }
            
            .welcome-notification p {
                font-size: 1.1rem;
            }
            
            .welcome-notification .icon {
                font-size: 3.5rem;
            }
        }
        
        @media (max-width: 576px) {
            .app-title {
                font-size: 1.2rem;
            }
            
            .app-subtitle {
                font-size: 0.9rem;
            }
            
            .app-logo {
                font-size: 1.6rem;
            }
            
            .section-title {
                font-size: 1rem;
                margin: 15px 0;
            }
            
            .stats-number {
                font-size: 1.4rem;
            }
            
            .stats-label {
                font-size: 0.8rem;
            }
            
            .form-control, .form-select {
                padding: 10px 12px;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .filter-section .row > div {
                margin-bottom: 10px;
            }
            
            .d-flex.justify-content-between.align-items-center {
                flex-direction: column;
                align-items: flex-start !important;
            }
            
            .d-flex.justify-content-between.align-items-center .btn-group {
                margin-top: 10px;
                width: 100%;
            }
            
            .d-flex.justify-content-between.align-items-center .btn-group .btn {
                flex: 1;
            }
            
            .pagination {
                flex-wrap: wrap;
                margin-top: 10px;
            }
            
            .table-responsive {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .watermark {
                position: relative;
                text-align: center;
                margin-top: 10px;
                bottom: 0;
                right: 0;
            }
            
            .welcome-notification {
                padding: 20px 15px;
            }
            
            .welcome-notification h3 {
                font-size: 1.5rem;
            }
            
            .welcome-notification p {
                font-size: 1rem;
            }
            
            .welcome-notification .icon {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 400px) {
            .app-title {
                font-size: 1.1rem;
            }
            
            .app-logo {
                font-size: 1.4rem;
            }
            
            .nav-pills .nav-link {
                padding: 10px 12px;
                font-size: 0.85rem;
            }
            
            .feature-icon {
                font-size: 1rem;
                margin-right: 6px;
                width: 20px;
            }
            
            .stats-box {
                padding: 12px 10px;
            }
            
            .stats-number {
                font-size: 1.2rem;
            }
            
            .card-header {
                padding: 12px 15px;
            }
            
            .welcome-notification h3 {
                font-size: 1.3rem;
            }
            
            .welcome-notification p {
                font-size: 0.9rem;
            }
            
            .welcome-notification .icon {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>

    <!-- Welcome Notification - IMPROVED PREMIUM -->
    <div class="welcome-notification" id="welcomeNotification">
        <button class="btn-close-welcome" id="closeWelcome">
            <i class="fas fa-times"></i>
        </button>
        <div class="particles-container" id="welcomeParticles"></div>
        <div class="icon">
            <i class="fas fa-hand-holding-water"></i>
        </div>
        <h3>Selamat Datang di APLIKASI BARJAS</h3>
        <p>Dinas Peternakan dan Perikanan Kabupaten Situbondo</p>
        <p>Terima kasih telah menggunakan aplikasi kami. Untuk keamanan data, harap mengganti password default dan lakukan backup data secara berkala.</p>
        <p><span class="highlight">Password default:</span> Dis******05</p>
        <p><small>Hubungi admin untuk bantuan lebih lanjut</small></p>
    </div>

    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="app-container">
        <div class="app-header">
            <div class="app-logo">
                <i class="fas fa-hand-holding-water"></i>
            </div>
            <h1 class="app-title">APLIKASI BARJAS</h1>
            <p class="app-subtitle">Dinas Peternakan dan Perikanan Situbondo</p>
            <div class="watermark">Lentera Karya Situbondo © 2025</div>
        </div>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-3 col-lg-2 p-4 bg-light">
                    <ul class="nav nav-pills flex-column" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="input-tab" data-bs-toggle="tab" href="#input" role="tab">
                                <i class="fas fa-pen feature-icon"></i>Input & Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="stats-tab" data-bs-toggle="tab" href="#stats" role="tab">
                                <i class="fas fa-chart-pie feature-icon"></i>Statistik
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="backup-tab" data-bs-toggle="tab" href="#backup" role="tab">
                                <i class="fas fa-cloud-download-alt feature-icon"></i>Backup & Restore
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="control-tab" data-bs-toggle="tab" href="#control" role="tab">
                                <i class="fas fa-cog feature-icon"></i>Kontrol Panel
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="about-tab" data-bs-toggle="tab" href="#about" role="tab">
                                <i class="fas fa-info-circle feature-icon"></i>Tentang
                            </a>
                        </li>
                    </ul>
                    
                    <div class="mt-4 p-3 bg-white rounded" style="box-shadow: var(--shadow-sm);">
                        <h6 class="text-center mb-3" style="color: var(--primary-color); font-weight: 600;">Total Data</h6>
                        <div class="d-flex justify-content-around">
                            <div class="text-center">
                                <div class="fw-bold fs-4 text-primary" id="total-data">0</div>
                                <div class="text-muted small">Data</div>
                            </div>
                            <div class="text-center">
                                <div class="fw-bold fs-4 text-primary" id="current-year">2025</div>
                                <div class="text-muted small">Tahun</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-panel">
                        <h6 class="control-title"><i class="fas fa-user-cog me-2"></i>Kontrol Cepat</h6>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary btn-sm" id="quickBackupBtn">
                                <i class="fas fa-download me-2"></i>Backup Cepat
                            </button>
                            <button class="btn btn-outline-info btn-sm" id="refreshDataBtn">
                                <i class="fas fa-sync-alt me-2"></i>Refresh Data
                            </button>
                            <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#passwordModal">
                                <i class="fas fa-key me-2"></i>Ganti Password
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-9 col-lg-10 p-5">
                    <div class="tab-content" id="myTabContent">
                        <!-- Input Data Form dan Data Table -->
                        <div class="tab-pane fade show active" id="input" role="tabpanel">
                            <h3 class="section-title">Form Serah Terima Bantuan</h3>
                            <form id="bantuanForm" class="animate-fadeIn">
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="namaKUB" class="form-label"><i class="fas fa-users"></i>Nama KUB (Kelompok Usaha Bersama)</label>
                                        <input type="text" class="form-control" id="namaKUB" required oninput="this.value = this.value.toUpperCase()">
                                        <div class="error-message" id="namaKUB-error">Nama KUB harus diisi (minimal 3 karakter)</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="tahunAnggaran" class="form-label"><i class="fas fa-calendar-alt"></i>Tahun Anggaran</label>
                                        <select class="form-select" id="tahunAnggaran" required>
                                            <option value="" selected disabled>Pilih Tahun</option>
                                            <!-- Tahun akan diisi oleh JavaScript -->
                                        </select>
                                        <div class="error-message" id="tahunAnggaran-error">Tahun anggaran harus dipilih</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="nik" class="form-label"><i class="fas fa-id-card"></i>NIK (KTP) <span class="text-muted">(16 digit)</span></label>
                                        <input type="text" class="form-control" id="nik" required maxlength="16" pattern="[0-9]{16}" oninput="this.value = this.value.replace(/\D/g, '')">
                                        <div class="error-message" id="nik-error">NIK harus berupa angka (16 digit)</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="nama" class="form-label"><i class="fas fa-user"></i>Nama Lengkap</label>
                                        <input type="text" class="form-control" id="nama" required pattern="[A-Za-z\s]+" oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, ''); this.value = this.value.toUpperCase()">
                                        <div class="error-message" id="nama-error">Nama harus diisi dan hanya boleh berisi huruf</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="jabatan" class="form-label"><i class="fas fa-briefcase"></i>Jabatan</label>
                                        <select class="form-select" id="jabatan" required>
                                            <option value="" selected disabled>Pilih Jabatan</option>
                                            <option value="Ketua Kelompok">Ketua Kelompok</option>
                                            <option value="Sekretaris">Sekretaris</option>
                                            <option value="Bendahara">Bendahara</option>
                                            <option value="Anggota">Anggota</option>
                                        </select>
                                        <div class="error-message" id="jabatan-error">Jabatan harus dipilih</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="whatsapp" class="form-label"><i class="fas fa-phone"></i>Nomor WhatsApp</label>
                                        <div class="input-group">
                                            <span class="input-group-text">+62</span>
                                            <input type="tel" class="form-control" id="whatsapp" required pattern="[0-9]{9,13}">
                                        </div>
                                        <div class="error-message" id="whatsapp-error">Nomor WhatsApp harus valid (9-13 digit)</div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="alamat" class="form-label"><i class="fas fa-map-marker-alt"></i>Alamat</label>
                                    <div class="mb-3">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="alamatOption" id="alamatManual" value="manual" checked>
                                            <label class="form-check-label" for="alamatManual">Manual</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="alamatOption" id="alamatDesa" value="desa">
                                            <label class="form-check-label" for="alamatDesa">Pilih Desa</label>
                                        </div>
                                    </div>
                                    
                                    <div id="alamatManualContainer">
                                        <textarea class="form-control" id="alamat" rows="3" required></textarea>
                                        <div class="error-message" id="alamat-error">Alamat harus diisi (minimal 10 karakter)</div>
                                    </div>
                                    
                                    <div id="alamatDesaContainer" style="display: none;">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <select class="form-select" id="kecamatan">
                                                    <option value="" selected disabled>Pilih Kecamatan</option>
                                                    <option value="Banyuglugur">Banyuglugur</option>
                                                    <option value="Besuki">Besuki</option>
                                                    <option value="Jatibanteng">Jatibanteng</option>
                                                    <option value="Kapongan">Kapongan</option>
                                                    <option value="Kendit">Kendit</option>
                                                    <option value="Mangaran">Mangaran</option>
                                                    <option value="Panarukan">Panarukan</option>
                                                    <option value="Panji">Panji</option>
                                                    <option value="Situbondo">Situbondo</option>
                                                    <option value="Suboh">Suboh</option>
                                                    <option value="Sumbermalang">Sumbermalang</option>
                                                </select>
                                                <div class="error-message" id="kecamatan-error">Kecamatan harus dipilih</div>
                                            </div>
                                            <div class="col-md-6">
                                                <select class="form-select" id="desa">
                                                    <option value="" selected disabled>Pilih Desa</option>
                                                    <!-- Desa akan diisi berdasarkan kecamatan -->
                                                </select>
                                                <div class="error-message" id="desa-error">Desa harus dipilih</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="jenisBantuan" class="form-label"><i class="fas fa-gift"></i>Jenis Bantuan</label>
                                        <select class="form-select" id="jenisBantuan" required>
                                            <option value="" selected disabled>Pilih Jenis Bantuan</option>
                                            <option value="Bibit Ikan">Bibit Ikan</option>
                                            <option value="Pakan Ikan">Pakan Ikan</option>
                                            <option value="Obat-obatan">Obat-obatan</option>
                                            <option value="Alat Penangkapan">Alat Penangkapan</option>
                                            <option value="Bibit Ternak">Bibit Ternak</option>
                                            <option value="Pakan Ternak">Pakan Ternak</option>
                                            <option value="Kandang Ternak">Kandang Ternak</option>
                                            <option value="Lainnya">Lainnya</option>
                                        </select>
                                        <div class="error-message" id="jenisBantuan-error">Jenis bantuan harus dipilih</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="jumlahBantuan" class="form-label"><i class="fas fa-calculator"></i>Jumlah Bantuan</label>
                                        <input type="number" class="form-control" id="jumlahBantuan" required min="1">
                                        <div class="error-message" id="jumlahBantuan-error">Jumlah bantuan harus diisi (minimal 1)</div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="keterangan" class="form-label"><i class="fas fa-sticky-note"></i>Keterangan (Opsional)</label>
                                    <textarea class="form-control" id="keterangan" rows="2"></textarea>
                                </div>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="konfirmasiData" required>
                                        <label class="form-check-label" for="konfirmasiData">
                                            Saya telah memeriksa dan menyatakan data di atas benar
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane me-2"></i>Simpan Data
                                    </button>
                                </div>
                            </form>
                            
                            <hr class="my-5">
                            
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h3 class="section-title m-0">Data Bantuan</h3>
                                <div class="btn-group">
                                    <button class="btn btn-outline-primary" id="printBtn">
                                        <i class="fas fa-print me-2"></i>Cetak
                                    </button>
                                    <button class="btn btn-outline-success" id="exportExcelBtn">
                                        <i class="fas fa-file-excel me-2"></i>Excel
                                    </button>
                                    <button class="btn btn-outline-danger" id="exportPdfBtn">
                                        <i class="fas fa-file-pdf me-2"></i>PDF
                                    </button>
                                </div>
                            </div>
                            
                            <div class="filter-section">
                                <div class="row">
                                    <div class="col-md-3 mb-3">
                                        <label for="filterTahun" class="form-label"><i class="fas fa-filter"></i>Filter Tahun</label>
                                        <select class="form-select" id="filterTahun">
                                            <option value="">Semua Tahun</option>
                                            <!-- Tahun akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="filterKecamatan" class="form-label"><i class="fas fa-filter"></i>Filter Kecamatan</label>
                                        <select class="form-select" id="filterKecamatan">
                                            <option value="">Semua Kecamatan</option>
                                            <option value="Banyuglugur">Banyuglugur</option>
                                            <option value="Besuki">Besuki</option>
                                            <option value="Jatibanteng">Jatibanteng</option>
                                            <option value="Kapongan">Kapongan</option>
                                            <option value="Kendit">Kendit</option>
                                            <option value="Mangaran">Mangaran</option>
                                            <option value="Panarukan">Panarukan</option>
                                            <option value="Panji">Panji</option>
                                            <option value="Situbondo">Situbondo</option>
                                            <option value="Suboh">Suboh</option>
                                            <option value="Sumbermalang">Sumbermalang</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="filterJenis" class="form-label"><i class="fas fa-filter"></i>Filter Jenis Bantuan</label>
                                        <select class="form-select" id="filterJenis">
                                            <option value="">Semua Jenis</option>
                                            <option value="Bibit Ikan">Bibit Ikan</option>
                                            <option value="Pakan Ikan">Pakan Ikan</option>
                                            <option value="Obat-obatan">Obat-obatan</option>
                                            <option value="Alat Penangkapan">Alat Penangkapan</option>
                                            <option value="Bibit Ternak">Bibit Ternak</option>
                                            <option value="Pakan Ternak">Pakan Ternak</option>
                                            <option value="Kandang Ternak">Kandang Ternak</option>
                                            <option value="Lainnya">Lainnya</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="searchInput" class="form-label"><i class="fas fa-search"></i>Cari Data</label>
                                        <input type="text" class="form-control" id="searchInput" placeholder="Cari nama, KUB, atau NIK...">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover data-table" id="dataTable">
                                    <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>Nama KUB</th>
                                            <th>Tahun</th>
                                            <th>NIK</th>
                                            <th>Nama</th>
                                            <th>Jabatan</th>
                                            <th>WhatsApp</th>
                                            <th>Alamat</th>
                                            <th>Jenis Bantuan</th>
                                            <th>Jumlah</th>
                                            <th>Keterangan</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableBody">
                                        <!-- Data akan diisi oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <nav aria-label="Page navigation" class="mt-4">
                                <ul class="pagination justify-content-center" id="pagination">
                                    <!-- Pagination akan diisi oleh JavaScript -->
                                </ul>
                            </nav>
                        </div>
                        
                        <!-- Statistik -->
                        <div class="tab-pane fade" id="stats" role="tabpanel">
                            <h3 class="section-title">Statistik Bantuan</h3>
                            
                            <div class="row mb-5">
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-users fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="totalPenerima">0</div>
                                        <div class="stats-label">Total Penerima Bantuan</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-gift fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="totalBantuan">0</div>
                                        <div class="stats-label">Total Bantuan Disalurkan</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-map-marker-alt fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="totalKecamatan">0</div>
                                        <div class="stats-label">Kecamatan Terjangkau</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-bar me-2"></i>Statistik per Jenis Bantuan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="jenisBantuanChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-pie me-2"></i>Distribusi per Kecamatan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="kecamatanChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-line me-2"></i>Trend per Tahun
                                        </div>
                                        <div class="card-body">
                                            <canvas id="tahunChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-table me-2"></i>Data Statistik
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>Kecamatan</th>
                                                            <th>Jumlah Penerima</th>
                                                            <th>Persentase</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="statsTableBody">
                                                        <!-- Data statistik akan diisi oleh JavaScript -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Backup & Restore -->
                        <div class="tab-pane fade" id="backup" role="tabpanel">
                            <h3 class="section-title">Backup & Restore Data</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-cloud-download-alt me-2"></i>Backup Data
                                        </div>
                                        <div class="card-body">
                                            <p>Lakukan backup data secara berkala untuk mencegah kehilangan data.</p>
                                            <div class="mb-3">
                                                <label class="form-label">Pilih Format Backup</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="backupFormat" id="formatJson" value="json" checked>
                                                    <label class="form-check-label" for="formatJson">JSON (Format Aplikasi)</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="backupFormat" id="formatExcel" value="excel">
                                                    <label class="form-check-label" for="formatExcel">Excel (Format Laporan)</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="backupFormat" id="formatPdf" value="pdf">
                                                    <label class="form-check-label" for="formatPdf">PDF (Format Dokumen)</label>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary w-100" id="backupBtn">
                                                <i class="fas fa-download me-2"></i>Backup Data Sekarang
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-cloud-upload-alt me-2"></i>Restore Data
                                        </div>
                                        <div class="card-body">
                                            <p>Upload file backup untuk mengembalikan data.</p>
                                            <div class="mb-3">
                                                <label for="restoreFile" class="form-label">Pilih File Backup</label>
                                                <input class="form-control" type="file" id="restoreFile" accept=".json,.xlsx,.csv">
                                            </div>
                                            <button class="btn btn-success w-100" id="restoreBtn">
                                                <i class="fas fa-upload me-2"></i>Restore Data
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-history me-2"></i>Riwayat Backup
                                        </div>
                                        <div class="card-body">
                                            <div class="table-responsive">
                                                <table class="table table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>Tanggal</th>
                                                            <th>Jenis</th>
                                                            <th>Ukuran</th>
                                                            <th>Status</th>
                                                            <th>Aksi</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody id="backupHistoryBody">
                                                        <!-- Riwayat backup akan diisi oleh JavaScript -->
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Kontrol Panel -->
                        <div class="tab-pane fade" id="control" role="tabpanel">
                            <h3 class="section-title">Kontrol Panel</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-user-shield me-2"></i>Pengaturan Keamanan
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="currentPassword" class="form-label">Password Saat Ini</label>
                                                <input type="password" class="form-control" id="currentPassword">
                                            </div>
                                            <div class="mb-3">
                                                <label for="newPassword" class="form-label">Password Baru</label>
                                                <input type="password" class="form-control" id="newPassword">
                                            </div>
                                            <div class="mb-3">
                                                <label for="confirmPassword" class="form-label">Konfirmasi Password Baru</label>
                                                <input type="password" class="form-control" id="confirmPassword">
                                            </div>
                                            <button class="btn btn-primary" id="changePasswordBtn">
                                                <i class="fas fa-key me-2"></i>Ganti Password
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-database me-2"></i>Manajemen Data
                                        </div>
                                        <div class="card-body">
                                            <div class="alert alert-warning">
                                                <i class="fas fa-exclamation-triangle me-2"></i>
                                                <strong>Peringatan!</strong> Tindakan berikut akan mempengaruhi data secara permanen.
                                            </div>
                                            <div class="d-grid gap-2">
                                                <button class="btn btn-outline-danger" data-bs-toggle="modal" data-bs-target="#clearDataModal">
                                                    <i class="fas fa-trash me-2"></i>Hapus Semua Data
                                                </button>
                                                <button class="btn btn-outline-warning" id="resetDemoBtn">
                                                    <i class="fas fa-redo me-2"></i>Reset Data Demo
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-sliders-h me-2"></i>Pengaturan Tampilan
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Tema Aplikasi</label>
                                                <select class="form-select" id="themeSelect">
                                                    <option value="default" selected>Default (Biru)</option>
                                                    <option value="green">Hijau</option>
                                                    <option value="orange">Oranye</option>
                                                    <option value="purple">Ungu</option>
                                                    <option value="dark">Gelap</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Jumlah Data per Halaman</label>
                                                <select class="form-select" id="pageSizeSelect">
                                                    <option value="10">10 Data</option>
                                                    <option value="25" selected>25 Data</option>
                                                    <option value="50">50 Data</option>
                                                    <option value="100">100 Data</option>
                                                </select>
                                            </div>
                                            <button class="btn btn-primary" id="saveSettingsBtn">
                                                <i class="fas fa-save me-2"></i>Simpan Pengaturan
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i>Informasi Sistem
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Versi Aplikasi</label>
                                                <div class="alert alert-info py-2">
                                                    <strong>v2.1.0</strong> - Build 2025.08.22
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Status Penyimpanan</label>
                                                <div class="progress mb-2">
                                                    <div class="progress-bar" id="storageProgress" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                                                </div>
                                                <small class="text-muted" id="storageInfo">Menggunakan 2.5 MB dari 10 MB yang tersedia</small>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Browser & Platform</label>
                                                <div class="alert alert-secondary py-2" id="browserInfo">
                                                    <!-- Informasi browser akan diisi oleh JavaScript -->
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tentang -->
                        <div class="tab-pane fade" id="about" role="tabpanel">
                            <h3 class="section-title">Tentang Aplikasi</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i>Informasi Aplikasi
                                        </div>
                                        <div class="card-body">
                                            <h5 class="card-title">APLIKASI BARJAS</h5>
                                            <p class="card-text">
                                                Aplikasi Bantuan Peternakan dan Perikanan Situbondo (BARJAS) adalah sistem informasi 
                                                untuk mengelola data bantuan yang disalurkan kepada kelompok usaha bersama (KUB) 
                                                di Kabupaten Situbondo.
                                            </p>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Versi
                                                    <span class="badge bg-primary rounded-pill">v2.1.0</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Tanggal Rilis
                                                    <span class="badge bg-primary rounded-pill">22 Agustus 2025</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Pengembang
                                                    <span class="badge bg-primary rounded-pill">Lentera Karya Situbondo</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Lisensi
                                                    <span class="badge bg-primary rounded-pill">MIT License</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-users me-2"></i>Tim Pengembang
                                        </div>
                                        <div class="card-body">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="flex-shrink-0">
                                                    <img src="https://ui-avatars.com/api/?name=Tim+Developer&background=0D47A1&color=fff" alt="Tim Developer" class="rounded-circle" width="50">
                                                </div>
                                                <div class="flex-grow-1 ms-3">
                                                    <h6 class="mb-0">Tim Developer Lentera Karya</h6>
                                                    <small class="text-muted">Full Stack Developer</small>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="flex-shrink-0">
                                                    <img src="https://ui-avatars.com/api/?name=UI+Designer&background=00695C&color=fff" alt="UI Designer" class="rounded-circle" width="50">
                                                </div>
                                                <div class="flex-grow-1 ms-3">
                                                    <h6 class="mb-0">UI/UX Designer Team</h6>
                                                    <small class="text-muted">User Interface Designer</small>
                                                </div>
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <div class="flex-shrink-0">
                                                    <img src="https://ui-avatars.com/api/?name=QA+Tester&background=FF8F00&color=fff" alt="QA Tester" class="rounded-circle" width="50">
                                                </div>
                                                <div class="flex-grow-1 ms-3">
                                                    <h6 class="mb-0">Quality Assurance Team</h6>
                                                    <small class="text-muted">Testing & Quality Control</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-book me-2"></i>Panduan Penggunaan
                                        </div>
                                        <div class="card-body">
                                            <div class="accordion" id="usageGuide">
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#guide1">
                                                            Cara Input Data
                                                        </button>
                                                    </h2>
                                                    <div id="guide1" class="accordion-collapse collapse show" data-bs-parent="#usageGuide">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka tab <strong>Input & Data</strong></li>
                                                                <li>Isi semua field yang wajib diisi</li>
                                                                <li>Klik tombol <strong>Simpan Data</strong></li>
                                                                <li>Data akan tersimpan dan muncul di tabel</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#guide2">
                                                            Cara Mencetak Laporan
                                                        </button>
                                                    </h2>
                                                    <div id="guide2" class="accordion-collapse collapse" data-bs-parent="#usageGuide">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka tab <strong>Input & Data</strong></li>
                                                                <li>Gunakan filter untuk menyaring data jika perlu</li>
                                                                <li>Klik tombol <strong>Cetak</strong>, <strong>Excel</strong>, atau <strong>PDF</strong></li>
                                                                <li>File akan diunduh ke perangkat Anda</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="accordion-item">
                                                    <h2 class="accordion-header">
                                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#guide3">
                                                            Cara Backup Data
                                                        </button>
                                                    </h2>
                                                    <div id="guide3" class="accordion-collapse collapse" data-bs-parent="#usageGuide">
                                                        <div class="accordion-body">
                                                            <ol>
                                                                <li>Buka tab <strong>Backup & Restore</strong></li>
                                                                <li>Pilih format backup (JSON, Excel, atau PDF)</li>
                                                                <li>Klik tombol <strong>Backup Data Sekarang</strong></li>
                                                                <li>File backup akan diunduh ke perangkat Anda</li>
                                                            </ol>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-headset me-2"></i>Bantuan & Dukungan
                                        </div>
                                        <div class="card-body">
                                            <p>Jika Anda mengalami kendala atau membutuhkan bantuan, silakan hubungi:</p>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Email
                                                    <span class="badge bg-primary rounded-pill">support@lenterakarya.situbondo.id</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Telepon
                                                    <span class="badge bg-primary rounded-pill">(0338) 671234</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    WhatsApp
                                                    <span class="badge bg-primary rounded-pill">+62 812-3456-7890</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Jam Operasional
                                                    <span class="badge bg-primary rounded-pill">Senin-Jumat, 08:00-16:00</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2025 Dinas Peternakan dan Perikanan Kabupaten Situbondo. Hak Cipta Dilindungi.
        </div>
    </div>
    
    <!-- Floating Action Button -->
    <div class="floating-action-btn" id="scrollToTopBtn">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <!-- Modal Hapus Data -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Konfirmasi Hapus Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus data ini? Tindakan ini tidak dapat dibatalkan.</p>
                    <div class="alert alert-warning py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Peringatan:</strong> Data yang dihapus tidak dapat dikembalikan.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmDelete">Hapus Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Password -->
    <div class="modal fade password-modal" id="passwordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordModalLabel">Verifikasi Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Untuk melanjutkan aksi ini, masukkan password administrator:</p>
                    <div class="mb-3">
                        <label for="adminPassword" class="form-label">Password Administrator</label>
                        <input type="password" class="form-control" id="adminPassword" placeholder="Masukkan password">
                    </div>
                    <div class="alert alert-danger d-none" id="passwordError">
                        <i class="fas fa-exclamation-circle me-2"></i>
                        <span id="passwordErrorMessage">Password yang dimasukkan salah.</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="submitPassword">Verifikasi</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Clear Data -->
    <div class="modal fade" id="clearDataModal" tabindex="-1" aria-labelledby="clearDataModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="clearDataModalLabel">Hapus Semua Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus semua data? Tindakan ini akan menghapus semua data yang tersimpan dan tidak dapat dibatalkan.</p>
                    <div class="alert alert-danger py-2">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Peringatan Kritis:</strong> Semua data akan dihapus secara permanen. Pastikan Anda telah melakukan backup data sebelum melanjutkan.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmClearData">Hapus Semua Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast notification-toast" id="notificationToast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <i class="fas fa-bell text-primary me-2" id="toastIcon"></i>
            <strong class="me-auto" id="toastTitle">Notifikasi</strong>
            <small id="toastTime">Baru saja</small>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toastMessage">
            <!-- Pesan toast akan diisi oleh JavaScript -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <script>
        // Inisialisasi variabel global
        let dataBantuan = JSON.parse(localStorage.getItem('dataBantuan')) || [];
        let currentPage = 1;
        let pageSize = 25;
        let currentDeleteId = null;
        
        // DOM Ready
        $(document).ready(function() {
            // Inisialisasi aplikasi
            initApp();
            
            // Event Listeners
            setupEventListeners();
            
            // Tampilkan notifikasi selamat datang
            setTimeout(() => {
                $('#welcomeNotification').addClass('show');
            }, 1000);
        });
        
        // Fungsi inisialisasi aplikasi
        function initApp() {
            // Isi dropdown tahun
            fillYearDropdowns();
            
            // Generate data demo jika tidak ada data
            if (dataBantuan.length === 0) {
                generateDemoData();
            }
            
            // Tampilkan data di tabel
            renderTable();
            
            // Update statistik
            updateStats();
            
            // Update informasi browser
            updateBrowserInfo();
            
            // Inisialisasi particles.js untuk background
            particlesJS('particles-js', {
                particles: {
                    number: { value: 30, density: { enable: true, value_area: 800 } },
                    color: { value: "#0d47a1" },
                    shape: { type: "circle" },
                    opacity: { value: 0.2, random: true },
                    size: { value: 3, random: true },
                    line_linked: { enable: true, distance: 150, color: "#0d47a1", opacity: 0.1, width: 1 },
                    move: { enable: true, speed: 1, direction: "none", random: true, straight: false, out_mode: "out" }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: { onhover: { enable: true, mode: "grab" }, onclick: { enable: true, mode: "push" }, resize: true }
                },
                retina_detect: true
            });
            
            // Inisialisasi particles.js untuk welcome notification
            particlesJS('welcomeParticles', {
                particles: {
                    number: { value: 40, density: { enable: true, value_area: 800 } },
                    color: { value: "#ffffff" },
                    shape: { type: "circle" },
                    opacity: { value: 0.3, random: true },
                    size: { value: 4, random: true },
                    line_linked: { enable: true, distance: 150, color: "#ffffff", opacity: 0.2, width: 1 },
                    move: { enable: true, speed: 2, direction: "none", random: true, straight: false, out_mode: "out" }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: { onhover: { enable: true, mode: "bubble" }, onclick: { enable: true, mode: "repulse" }, resize: true }
                },
                retina_detect: true
            });
        }
        
        // Fungsi untuk mengatur event listeners
        function setupEventListeners() {
            // Form submission
            $('#bantuanForm').on('submit', function(e) {
                e.preventDefault();
                saveData();
            });
            
            // Filter events
            $('#filterTahun, #filterKecamatan, #filterJenis, #searchInput').on('change keyup', function() {
                currentPage = 1;
                renderTable();
            });
            
            // Radio button alamat
            $('input[name="alamatOption"]').on('change', function() {
                if ($(this).val() === 'manual') {
                    $('#alamatManualContainer').show();
                    $('#alamatDesaContainer').hide();
                } else {
                    $('#alamatManualContainer').hide();
                    $('#alamatDesaContainer').show();
                }
            });
            
            // Kecamatan change event
            $('#kecamatan').on('change', function() {
                updateDesaDropdown($(this).val());
            });
            
            // Modal events
            $('#deleteModal').on('show.bs.modal', function(event) {
                const button = $(event.relatedTarget);
                currentDeleteId = button.data('id');
            });
            
            // Konfirmasi hapus data
            $('#confirmDelete').on('click', function() {
                deleteData(currentDeleteId);
                $('#deleteModal').modal('hide');
            });
            
            // Submit password
            $('#submitPassword').on('click', function() {
                validatePassword();
            });
            
            // Close welcome notification
            $('#closeWelcome').on('click', function() {
                $('#welcomeNotification').removeClass('show');
            });
            
            // Mobile menu
            $('#mobileMenuBtn').on('click', function() {
                $('body').addClass('sidebar-open');
                $('#sidebarOverlay').addClass('active');
            });
            
            $('#sidebarOverlay').on('click', function() {
                $('body').removeClass('sidebar-open');
                $(this).removeClass('active');
            });
            
            // Scroll to top
            $('#scrollToTopBtn').on('click', function() {
                $('html, body').animate({ scrollTop: 0 }, 500);
            });
            
            // Quick actions
            $('#refreshDataBtn').on('click', function() {
                renderTable();
                updateStats();
                showToast('Data diperbarui', 'Data berhasil diperbarui.', 'success');
            });
            
            // Export buttons
            $('#printBtn').on('click', function() {
                printData();
            });
            
            $('#exportExcelBtn').on('click', function() {
                exportToExcel();
            });
            
            $('#exportPdfBtn').on('click', function() {
                exportToPDF();
            });
        }
        
        // Fungsi untuk mengisi dropdown tahun
        function fillYearDropdowns() {
            const currentYear = new Date().getFullYear();
            $('#current-year').text(currentYear);
            
            // Isi dropdown tahun anggaran (5 tahun terakhir)
            const tahunAnggaran = $('#tahunAnggaran');
            const filterTahun = $('#filterTahun');
            
            tahunAnggaran.empty().append('<option value="" selected disabled>Pilih Tahun</option>');
            filterTahun.empty().append('<option value="">Semua Tahun</option>');
            
            for (let year = currentYear; year >= currentYear - 5; year--) {
                tahunAnggaran.append(`<option value="${year}">${year}</option>`);
                filterTahun.append(`<option value="${year}">${year}</option>`);
            }
        }
        
        // Fungsi untuk menghasilkan data demo
        function generateDemoData() {
            const kecamatanList = [
                "Banyuglugur", "Besuki", "Jatibanteng", "Kapongan", "Kendit", 
                "Mangaran", "Panarukan", "Panji", "Situbondo", "Suboh", "Sumbermalang"
            ];
            
            const jenisBantuanList = [
                "Bibit Ikan", "Pakan Ikan", "Obat-obatan", "Alat Penangkapan",
                "Bibit Ternak", "Pakan Ternak", "Kandang Ternak", "Lainnya"
            ];
            
            const jabatanList = ["Ketua Kelompok", "Sekretaris", "Bendahara", "Anggota"];
            
            for (let i = 1; i <= 50; i++) {
                const tahun = Math.floor(Math.random() * 3) + 2023;
                const kecamatan = kecamatanList[Math.floor(Math.random() * kecamatanList.length)];
                const jenisBantuan = jenisBantuanList[Math.floor(Math.random() * jenisBantuanList.length)];
                const jabatan = jabatanList[Math.floor(Math.random() * jabatanList.length)];
                
                dataBantuan.push({
                    id: Date.now() + i,
                    namaKUB: `KUB ${String.fromCharCode(65 + Math.floor(Math.random() * 26))}${i}`,
                    tahunAnggaran: tahun,
                    nik: `35${Math.floor(10000000000000 + Math.random() * 90000000000000)}`.substring(0, 16),
                    nama: `Nama Lengkap ${i}`,
                    jabatan: jabatan,
                    whatsapp: `8${Math.floor(100000000 + Math.random() * 900000000)}`,
                    alamat: `Desa Contoh, Kec. ${kecamatan}, Situbondo`,
                    jenisBantuan: jenisBantuan,
                    jumlahBantuan: Math.floor(Math.random() * 100) + 1,
                    keterangan: `Keterangan contoh untuk data ${i}`,
                    timestamp: new Date().toISOString()
                });
            }
            
            // Simpan ke localStorage
            localStorage.setItem('dataBantuan', JSON.stringify(dataBantuan));
        }
        
        // Fungsi untuk menyimpan data
        function saveData() {
            // Validasi form
            if (!validateForm()) {
                showToast('Error Validasi', 'Harap periksa kembali form input.', 'error');
                return;
            }
            
            // Ambil nilai dari form
            const formData = {
                id: Date.now(),
                namaKUB: $('#namaKUB').val().trim(),
                tahunAnggaran: $('#tahunAnggaran').val(),
                nik: $('#nik').val().trim(),
                nama: $('#nama').val().trim(),
                jabatan: $('#jabatan').val(),
                whatsapp: $('#whatsapp').val().trim(),
                alamat: $('input[name="alamatOption"]:checked').val() === 'manual' 
                    ? $('#alamat').val().trim() 
                    : $('#desa option:selected').text() + ', Kec. ' + $('#kecamatan').val(),
                jenisBantuan: $('#jenisBantuan').val(),
                jumlahBantuan: $('#jumlahBantuan').val(),
                keterangan: $('#keterangan').val().trim(),
                timestamp: new Date().toISOString()
            };
            
            // Tambahkan ke array
            dataBantuan.unshift(formData);
            
            // Simpan ke localStorage
            localStorage.setItem('dataBantuan', JSON.stringify(dataBantuan));
            
            // Reset form
            $('#bantuanForm')[0].reset();
            
            // Perbarui tabel
            renderTable();
            
            // Perbarui statistik
            updateStats();
            
            // Tampilkan notifikasi
            showToast('Data Tersimpan', 'Data berhasil disimpan.', 'success');
        }
        
        // Fungsi untuk validasi form
        function validateForm() {
            let isValid = true;
            
            // Validasi Nama KUB
            const namaKUB = $('#namaKUB').val().trim();
            if (namaKUB.length < 3) {
                $('#namaKUB').addClass('input-error');
                $('#namaKUB-error').show();
                isValid = false;
            } else {
                $('#namaKUB').removeClass('input-error');
                $('#namaKUB-error').hide();
            }
            
            // Validasi Tahun Anggaran
            const tahunAnggaran = $('#tahunAnggaran').val();
            if (!tahunAnggaran) {
                $('#tahunAnggaran').addClass('input-error');
                $('#tahunAnggaran-error').show();
                isValid = false;
            } else {
                $('#tahunAnggaran').removeClass('input-error');
                $('#tahunAnggaran-error').hide();
            }
            
            // Validasi NIK
            const nik = $('#nik').val().trim();
            if (nik.length !== 16 || !/^\d+$/.test(nik)) {
                $('#nik').addClass('input-error');
                $('#nik-error').show();
                isValid = false;
            } else {
                $('#nik').removeClass('input-error');
                $('#nik-error').hide();
            }
            
            // Validasi Nama
            const nama = $('#nama').val().trim();
            if (nama.length < 3 || !/^[A-Za-z\s]+$/.test(nama)) {
                $('#nama').addClass('input-error');
                $('#nama-error').show();
                isValid = false;
            } else {
                $('#nama').removeClass('input-error');
                $('#nama-error').hide();
            }
            
            // Validasi Jabatan
            const jabatan = $('#jabatan').val();
            if (!jabatan) {
                $('#jabatan').addClass('input-error');
                $('#jabatan-error').show();
                isValid = false;
            } else {
                $('#jabatan').removeClass('input-error');
                $('#jabatan-error').hide();
            }
            
            // Validasi WhatsApp
            const whatsapp = $('#whatsapp').val().trim();
            if (whatsapp.length < 9 || whatsapp.length > 13 || !/^\d+$/.test(whatsapp)) {
                $('#whatsapp').addClass('input-error');
                $('#whatsapp-error').show();
                isValid = false;
            } else {
                $('#whatsapp').removeClass('input-error');
                $('#whatsapp-error').hide();
            }
            
            // Validasi Alamat
            if ($('input[name="alamatOption"]:checked').val() === 'manual') {
                const alamat = $('#alamat').val().trim();
                if (alamat.length < 10) {
                    $('#alamat').addClass('input-error');
                    $('#alamat-error').show();
                    isValid = false;
                } else {
                    $('#alamat').removeClass('input-error');
                    $('#alamat-error').hide();
                }
            } else {
                const kecamatan = $('#kecamatan').val();
                const desa = $('#desa').val();
                
                if (!kecamatan) {
                    $('#kecamatan').addClass('input-error');
                    $('#kecamatan-error').show();
                    isValid = false;
                } else {
                    $('#kecamatan').removeClass('input-error');
                    $('#kecamatan-error').hide();
                }
                
                if (!desa) {
                    $('#desa').addClass('input-error');
                    $('#desa-error').show();
                    isValid = false;
                } else {
                    $('#desa').removeClass('input-error');
                    $('#desa-error').hide();
                }
            }
            
            // Validasi Jenis Bantuan
            const jenisBantuan = $('#jenisBantuan').val();
            if (!jenisBantuan) {
                $('#jenisBantuan').addClass('input-error');
                $('#jenisBantuan-error').show();
                isValid = false;
            } else {
                $('#jenisBantuan').removeClass('input-error');
                $('#jenisBantuan-error').hide();
            }
            
            // Validasi Jumlah Bantuan
            const jumlahBantuan = $('#jumlahBantuan').val();
            if (!jumlahBantuan || jumlahBantuan < 1) {
                $('#jumlahBantuan').addClass('input-error');
                $('#jumlahBantuan-error').show();
                isValid = false;
            } else {
                $('#jumlahBantuan').removeClass('input-error');
                $('#jumlahBantuan-error').hide();
            }
            
            // Validasi Konfirmasi
            if (!$('#konfirmasiData').is(':checked')) {
                $('#konfirmasiData').addClass('input-error');
                isValid = false;
            } else {
                $('#konfirmasiData').removeClass('input-error');
            }
            
            return isValid;
        }
        
        // Fungsi untuk merender tabel
        function renderTable() {
            const filterTahun = $('#filterTahun').val();
            const filterKecamatan = $('#filterKecamatan').val();
            const filterJenis = $('#filterJenis').val();
            const searchText = $('#searchInput').val().toLowerCase();
            
            // Filter data
            let filteredData = dataBantuan.filter(item => {
                return (
                    (filterTahun === '' || item.tahunAnggaran == filterTahun) &&
                    (filterKecamatan === '' || item.alamat.includes(filterKecamatan)) &&
                    (filterJenis === '' || item.jenisBantuan === filterJenis) &&
                    (searchText === '' || 
                     item.nama.toLowerCase().includes(searchText) ||
                     item.namaKUB.toLowerCase().includes(searchText) ||
                     item.nik.includes(searchText))
                );
            });
            
            // Hitung total data
            $('#total-data').text(filteredData.length);
            
            // Hitung total halaman
            const totalPages = Math.ceil(filteredData.length / pageSize);
            
            // Pastikan currentPage valid
            if (currentPage > totalPages) currentPage = totalPages;
            if (currentPage < 1) currentPage = 1;
            
            // Potong data untuk halaman saat ini
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = Math.min(startIndex + pageSize, filteredData.length);
            const currentData = filteredData.slice(startIndex, endIndex);
            
            // Render data ke tabel
            const tableBody = $('#tableBody');
            tableBody.empty();
            
            if (currentData.length === 0) {
                tableBody.append(`
                    <tr>
                        <td colspan="12" class="text-center py-4">
                            <i class="fas fa-database fs-1 text-muted d-block mb-2"></i>
                            <p class="text-muted">Tidak ada data yang ditemukan.</p>
                        </td>
                    </tr>
                `);
            } else {
                currentData.forEach((item, index) => {
                    const no = startIndex + index + 1;
                    tableBody.append(`
                        <tr>
                            <td class="text-center">${no}</td>
                            <td>${item.namaKUB}</td>
                            <td class="text-center">${item.tahunAnggaran}</td>
                            <td>${item.nik}</td>
                            <td>${item.nama}</td>
                            <td>${item.jabatan}</td>
                            <td>+62${item.whatsapp}</td>
                            <td>${item.alamat}</td>
                            <td>${item.jenisBantuan}</td>
                            <td class="text-center">${item.jumlahBantuan}</td>
                            <td>${item.keterangan || '-'}</td>
                            <td class="text-center">
                                <div class="btn-group btn-group-sm">
                                    <button class="btn btn-outline-primary" data-bs-toggle="tooltip" title="Edit" onclick="editData(${item.id})">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-outline-danger" data-bs-toggle="tooltip" title="Hapus" data-bs-toggle="modal" data-bs-target="#deleteModal" data-id="${item.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `);
                });
            }
            
            // Render pagination
            renderPagination(totalPages);
            
            // Inisialisasi tooltip
            $('[data-bs-toggle="tooltip"]').tooltip();
        }
        
        // Fungsi untuk merender pagination
        function renderPagination(totalPages) {
            const pagination = $('#pagination');
            pagination.empty();
            
            if (totalPages <= 1) return;
            
            // Tombol Previous
            pagination.append(`
                <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                    <a class="page-link" href="#" data-page="${currentPage - 1}">Previous</a>
                </li>
            `);
            
            // Halaman
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, startPage + 4);
            
            for (let i = startPage; i <= endPage; i++) {
                pagination.append(`
                    <li class="page-item ${i === currentPage ? 'active' : ''}">
                        <a class="page-link" href="#" data-page="${i}">${i}</a>
                    </li>
                `);
            }
            
            // Tombol Next
            pagination.append(`
                <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
                    <a class="page-link" href="#" data-page="${currentPage + 1}">Next</a>
                </li>
            `);
            
            // Event listener untuk pagination
            $('.page-link').on('click', function(e) {
                e.preventDefault();
                const page = parseInt($(this).data('page'));
                if (!isNaN(page)) {
                    currentPage = page;
                    renderTable();
                }
            });
        }
        
        // Fungsi untuk menghapus data - PERBAIKAN UTAMA
        function deleteData(id) {
            // Cari indeks data
            const index = dataBantuan.findIndex(item => item.id === id);
            
            if (index !== -1) {
                // Hapus data dari array
                dataBantuan.splice(index, 1);
                
                // Simpan ke localStorage
                localStorage.setItem('dataBantuan', JSON.stringify(dataBantuan));
                
                // Perbarui tabel
                renderTable();
                
                // Perbarui statistik
                updateStats();
                
                // Tampilkan notifikasi
                showToast('Data Dihapus', 'Data berhasil dihapus.', 'success');
            } else {
                showToast('Error', 'Data tidak ditemukan.', 'error');
            }
        }
        
        // Fungsi untuk mengedit data
        function editData(id) {
            // Cari data
            const data = dataBantuan.find(item => item.id === id);
            
            if (data) {
                // Isi form dengan data
                $('#namaKUB').val(data.namaKUB);
                $('#tahunAnggaran').val(data.tahunAnggaran);
                $('#nik').val(data.nik);
                $('#nama').val(data.nama);
                $('#jabatan').val(data.jabatan);
                $('#whatsapp').val(data.whatsapp);
                
                // Cek apakah alamat mengandung kecamatan
                if (data.alamat.includes('Kec.')) {
                    $('#alamatDesa').prop('checked', true);
                    $('#alamatManualContainer').hide();
                    $('#alamatDesaContainer').show();
                    
                    // Ekstrak kecamatan dari alamat
                    const kecamatanMatch = data.alamat.match(/Kec\.\s*([^,]+)/);
                    if (kecamatanMatch && kecamatanMatch[1]) {
                        $('#kecamatan').val(kecamatanMatch[1].trim());
                        updateDesaDropdown(kecamatanMatch[1].trim());
                    }
                    
                    // Ekstrak desa dari alamat
                    const desaMatch = data.alamat.match(/(.+),\s*Kec\./);
                    if (desaMatch && desaMatch[1]) {
                        $('#desa').val(desaMatch[1].trim());
                    }
                } else {
                    $('#alamatManual').prop('checked', true);
                    $('#alamatManualContainer').show();
                    $('#alamatDesaContainer').hide();
                    $('#alamat').val(data.alamat);
                }
                
                $('#jenisBantuan').val(data.jenisBantuan);
                $('#jumlahBantuan').val(data.jumlahBantuan);
                $('#keterangan').val(data.keterangan || '');
                
                // Hapus data lama
                deleteData(id);
                
                // Scroll ke form
                $('html, body').animate({
                    scrollTop: $('#bantuanForm').offset().top
                }, 500);
                
                // Tampilkan notifikasi
                showToast('Data Dimuat', 'Data siap untuk diedit.', 'info');
            }
        }
        
        // Fungsi untuk memperbarui dropdown desa
        function updateDesaDropdown(kecamatan) {
            const desaDropdown = $('#desa');
            desaDropdown.empty().append('<option value="" selected disabled>Pilih Desa</option>');
            
            // Daftar desa berdasarkan kecamatan (contoh)
            const desaList = {
                "Banyuglugur": ["Desa Banyuglugur", "Desa Sumberanyar", "Desa Sumberejo"],
                "Besuki": ["Desa Besuki", "Desa Bloro", "Desa Demung", "Desa Sumberejo"],
                "Jatibanteng": ["Desa Jatibanteng", "Desa Curahsuri", "Desa Wringinanom"],
                "Kapongan": ["Desa Kapongan", "Desa Kesambirampak", "Desa Landangan", "Desa Paowan"],
                "Kendit": ["Desa Kendit", "Desa Balung", "Desa Kukusan", "Desa Rajekwesi"],
                "Mangaran": ["Desa Mangaran", "Desa Patokan", "Desa Semboro", "Desa Sumberejo"],
                "Panarukan": ["Desa Panarukan", "Desa Peleyan", "Desa Kilensari", "Desa Sumberkolak"],
                "Panji": ["Desa Panji", "Desa Badean", "Desa Battal", "Desa Jurangara"],
                "Situbondo": ["Desa Situbondo", "Desa Mimbaan", "Desa Tanjung", "Desa Talkandang"],
                "Suboh": ["Desa Suboh", "Desa Banyuputih", "Desa Sumberanyar", "Desa Sumberkencono"],
                "Sumbermalang": ["Desa Sumbermalang", "Desa Kalitapen", "Desa Sumberargo", "Desa Sumberejo"]
            };
            
            if (desaList[kecamatan]) {
                desaList[kecamatan].forEach(desa => {
                    desaDropdown.append(`<option value="${desa}">${desa}</option>`);
                });
            }
        }
        
        // Fungsi untuk memperbarui statistik
        function updateStats() {
            // Hitung total penerima
            $('#totalPenerima').text(dataBantuan.length);
            
            // Hitung total bantuan
            const totalBantuan = dataBantuan.reduce((sum, item) => sum + parseInt(item.jumlahBantuan), 0);
            $('#totalBantuan').text(totalBantuan.toLocaleString('id-ID'));
            
            // Hitung kecamatan terjangkau
            const kecamatanSet = new Set();
            dataBantuan.forEach(item => {
                const kecamatanMatch = item.alamat.match(/Kec\.\s*([^,]+)/);
                if (kecamatanMatch && kecamatanMatch[1]) {
                    kecamatanSet.add(kecamatanMatch[1].trim());
                }
            });
            $('#totalKecamatan').text(kecamatanSet.size);
            
            // Perbarui chart jika tab statistik aktif
            if ($('#stats-tab').hasClass('active')) {
                updateCharts();
            }
        }
        
        // Fungsi untuk memperbarui chart
        function updateCharts() {
            // Data untuk chart jenis bantuan
            const jenisBantuanCount = {};
            dataBantuan.forEach(item => {
                jenisBantuanCount[item.jenisBantuan] = (jenisBantuanCount[item.jenisBantuan] || 0) + 1;
            });
            
            // Data untuk chart kecamatan
            const kecamatanCount = {};
            dataBantuan.forEach(item => {
                const kecamatanMatch = item.alamat.match(/Kec\.\s*([^,]+)/);
                if (kecamatanMatch && kecamatanMatch[1]) {
                    const kecamatan = kecamatanMatch[1].trim();
                    kecamatanCount[kecamatan] = (kecamatanCount[kecamatan] || 0) + 1;
                }
            });
            
            // Data untuk chart tahun
            const tahunCount = {};
            dataBantuan.forEach(item => {
                tahunCount[item.tahunAnggaran] = (tahunCount[item.tahunAnggaran] || 0) + 1;
            });
            
            // Render chart jenis bantuan
            const jenisCtx = document.getElementById('jenisBantuanChart').getContext('2d');
            if (window.jenisChart) window.jenisChart.destroy();
            window.jenisChart = new Chart(jenisCtx, {
                type: 'bar',
                data: {
                    labels: Object.keys(jenisBantuanCount),
                    datasets: [{
                        label: 'Jumlah Penerima',
                        data: Object.values(jenisBantuanCount),
                        backgroundColor: 'rgba(13, 71, 161, 0.7)',
                        borderColor: 'rgba(13, 71, 161, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Distribusi Jenis Bantuan'
                        }
                    }
                }
            });
            
            // Render chart kecamatan
            const kecamatanCtx = document.getElementById('kecamatanChart').getContext('2d');
            if (window.kecamatanChart) window.kecamatanChart.destroy();
            window.kecamatanChart = new Chart(kecamatanCtx, {
                type: 'pie',
                data: {
                    labels: Object.keys(kecamatanCount),
                    datasets: [{
                        data: Object.values(kecamatanCount),
                        backgroundColor: [
                            'rgba(13, 71, 161, 0.7)',
                            'rgba(0, 105, 92, 0.7)',
                            'rgba(255, 143, 0, 0.7)',
                            'rgba(106, 27, 154, 0.7)',
                            'rgba(229, 57, 53, 0.7)',
                            'rgba(67, 160, 71, 0.7)',
                            'rgba(25, 118, 210, 0.7)',
                            'rgba(245, 124, 0, 0.7)',
                            'rgba(57, 73, 171, 0.7)',
                            'rgba(0, 121, 107, 0.7)',
                            'rgba(194, 24, 91, 0.7)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        },
                        title: {
                            display: true,
                            text: 'Distribusi per Kecamatan'
                        }
                    }
                }
            });
            
            // Render chart tahun
            const tahunCtx = document.getElementById('tahunChart').getContext('2d');
            if (window.tahunChart) window.tahunChart.destroy();
            window.tahunChart = new Chart(tahunCtx, {
                type: 'line',
                data: {
                    labels: Object.keys(tahunCount).sort(),
                    datasets: [{
                        label: 'Jumlah Penerima',
                        data: Object.keys(tahunCount).sort().map(year => tahunCount[year]),
                        fill: false,
                        backgroundColor: 'rgba(13, 71, 161, 0.7)',
                        borderColor: 'rgba(13, 71, 161, 1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Trend Penerima Bantuan per Tahun'
                        }
                    }
                }
            });
            
            // Update tabel statistik
            const statsTableBody = $('#statsTableBody');
            statsTableBody.empty();
            
            Object.entries(kecamatanCount).forEach(([kecamatan, count]) => {
                const percentage = ((count / dataBantuan.length) * 100).toFixed(1);
                statsTableBody.append(`
                    <tr>
                        <td>${kecamatan}</td>
                        <td>${count}</td>
                        <td>${percentage}%</td>
                    </tr>
                `);
            });
        }
        
        // Fungsi untuk validasi password
        function validatePassword() {
            const password = $('#adminPassword').val();
            
            // Password default (dalam aplikasi nyata, ini harus di-hash dan disimpan dengan aman)
            const defaultPassword = "Disnakkan05";
            
            if (password === defaultPassword) {
                $('#passwordError').addClass('d-none');
                $('#passwordModal').modal('hide');
                
                // Lakukan aksi yang membutuhkan verifikasi password
                // (dalam contoh ini, kita akan menampilkan notifikasi sukses)
                showToast('Password Valid', 'Password administrator benar.', 'success');
            } else {
                $('#passwordError').removeClass('d-none');
                $('#passwordErrorMessage').text('Password yang dimasukkan salah.');
            }
        }
        
        // Fungsi untuk menampilkan toast notifikasi
        function showToast(title, message, type = 'info') {
            const toast = $('#notificationToast');
            const toastTitle = $('#toastTitle');
            const toastMessage = $('#toastMessage');
            const toastIcon = $('#toastIcon');
            const toastTime = $('#toastTime');
            
            // Set icon berdasarkan type
            let iconClass = 'fas fa-bell';
            let bgClass = 'bg-primary';
            
            switch (type) {
                case 'success':
                    iconClass = 'fas fa-check-circle';
                    bgClass = 'bg-success';
                    break;
                case 'error':
                    iconClass = 'fas fa-exclamation-circle';
                    bgClass = 'bg-danger';
                    break;
                case 'warning':
                    iconClass = 'fas fa-exclamation-triangle';
                    bgClass = 'bg-warning';
                    break;
                case 'info':
                default:
                    iconClass = 'fas fa-info-circle';
                    bgClass = 'bg-info';
                    break;
            }
            
            // Set konten toast
            toastTitle.text(title);
            toastMessage.text(message);
            toastIcon.removeClass().addClass(`${iconClass} me-2 text-white`);
            toastTime.text('Baru saja');
            
            // Tampilkan toast
            toast.toast('show');
        }
        
        // Fungsi untuk memperbarui informasi browser
        function updateBrowserInfo() {
            const browserInfo = $('#browserInfo');
            const userAgent = navigator.userAgent;
            let browserName = "Browser tidak dikenali";
            
            if (userAgent.includes("Firefox")) {
                browserName = "Mozilla Firefox";
            } else if (userAgent.includes("Edg")) {
                browserName = "Microsoft Edge";
            } else if (userAgent.includes("Chrome")) {
                browserName = "Google Chrome";
            } else if (userAgent.includes("Safari")) {
                browserName = "Apple Safari";
            } else if (userAgent.includes("Opera") || userAgent.includes("OPR")) {
                browserName = "Opera";
            } else if (userAgent.includes("Trident")) {
                browserName = "Internet Explorer";
            }
            
            browserInfo.text(`${browserName} - ${navigator.platform}`);
        }
        
        // Fungsi untuk mencetak data
        function printData() {
            window.print();
        }
        
        // Fungsi untuk export ke Excel
        function exportToExcel() {
            // Dalam implementasi nyata, gunakan library seperti SheetJS
            showToast('Fitur Ekspor Excel', 'Fitur ekspor ke Excel akan segera tersedia.', 'info');
        }
        
        // Fungsi untuk export ke PDF
        function exportToPDF() {
            // Dalam implementasi nyata, gunakan library seperti jsPDF
            showToast('Fitur Ekspor PDF', 'Fitur ekspor ke PDF akan segera tersedia.', 'info');
        }
        
        // Fungsi untuk menangani scroll window
        $(window).on('scroll', function() {
            if ($(this).scrollTop() > 300) {
                $('#scrollToTopBtn').fadeIn();
            } else {
                $('#scrollToTopBtn').fadeOut();
            }
        });
        
        // Inisialisasi tooltip Bootstrap
        $(function () {
            $('[data-bs-toggle="tooltip"]').tooltip();
        });
    </script>
</body>
</html>
