<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - Dinas Peternakan dan Perikanan Situbondo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .password-modal .modal-content {
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            border: none;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Welcome notification styles - IMPROVED PREMIUM */
        .welcome-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, #0d47a1 0%, #082e5c 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            z-index: 2000;
            text-align: center;
            width: 90%;
            max-width: 650px;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            overflow: hidden;
        }
        
        .welcome-notification::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 65%);
            pointer-events: none;
            animation: rotateGradient 15s linear infinite;
        }
        
        .welcome-notification.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .welcome-notification h3 {
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 2.2rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }
        
        .welcome-notification p {
            margin-bottom: 15px;
            font-size: 1.2rem;
            line-height: 1.6;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .welcome-notification .icon {
            font-size: 4rem;
            margin-bottom: 25px;
            color: #ff8f00;
            text-shadow: 0 2px 12px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
            animation: pulse 2s infinite;
        }
        
        .welcome-notification .btn-close-welcome {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 3;
        }
        
        .welcome-notification .btn-close-welcome:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        .welcome-notification .highlight {
            color: #ff8f00;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .welcome-notification .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes rotateGradient {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Particle Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        /* Responsive styles */
        @media (max-width: 1200px) {
            .app-title {
                font-size: 1.6rem;
            }
            
            .app-logo {
                font-size: 2.2rem;
            }
            
            .stats-number {
                font-size: 1.6rem;
            }
        }
        
        @media (max-width: 992px) {
            .app-title {
                font-size: 1.4rem;
            }
            
            .app-logo {
                font-size: 2rem;
            }
            
            .stats-number {
                font-size: 1.4rem;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                position: fixed;
                top: 0;
                left: -300px;
                width: 280px;
                height: 100vh;
                z-index: 1050;
                overflow-y: auto;
                transition: left 0.3s ease;
                padding: 20px 15px !important;
            }
            
            .sidebar-open .col-md-3.col-lg-2.p-4.bg-light {
                left: 0;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .col-md-9.col-lg-10.p-5 {
                padding: 15px !important;
            }
        }
        
        @media (max-width: 768px) {
            .app-title {
                font-size: 1.3rem;
            }
            
            .app-logo {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
            
            .stats-box {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .floating-action-btn {
                bottom: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
            }
            
            .col-md-9.col-lg-10.p-5 {
                padding: 10px !important;
            }
            
            .app-header {
                padding: 15px 10px;
            }
            
            .data-table {
                font-size: 0.8rem;
            }
            
            .data-table th, .data-table td {
                padding: 8px 5px;
            }
            
            .btn-group .btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .welcome-notification {
                padding: 25px 20px;
            }
            
            .welcome-notification h3 {
                font-size: 1.8rem;
            }
            
            .welcome-notification p {
                font-size: 1.1rem;
            }
            
            .welcome-notification .icon {
                font-size: 3.5rem;
            }
        }
        
        @media (max-width: 576px) {
            .app-title {
                font-size: 1.2rem;
            }
            
            .app-subtitle {
                font-size: 0.9rem;
            }
            
            .app-logo {
                font-size: 1.6rem;
            }
            
            .section-title {
                font-size: 1rem;
                margin: 15px 0;
            }
            
            .stats-number {
                font-size: 1.4rem;
            }
            
            .stats-label {
                font-size: 0.8rem;
            }
            
            .form-control, .form-select {
                padding: 10px 12px;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .filter-section .row > div {
                margin-bottom: 10px;
            }
            
            .d-flex.justify-content-between.align-items-center {
                flex-direction: column;
                align-items: flex-start !important;
            }
            
            .d-flex.justify-content-between.align-items-center .btn-group {
                margin-top: 10px;
                width: 100%;
            }
            
            .d-flex.justify-content-between.align-items-center .btn-group .btn {
                flex: 1;
            }
            
            .pagination {
                flex-wrap: wrap;
                margin-top: 10px;
            }
            
            .table-responsive {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .watermark {
                position: relative;
                text-align: center;
                margin-top: 10px;
                bottom: 0;
                right: 0;
            }
            
            .welcome-notification {
                padding: 20px 15px;
            }
            
            .welcome-notification h3 {
                font-size: 1.5rem;
            }
            
            .welcome-notification p {
                font-size: 1rem;
            }
            
            .welcome-notification .icon {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 400px) {
            .app-title {
                font-size: 1.1rem;
            }
            
            .app-logo {
                font-size: 1.4rem;
            }
            
            .nav-pills .nav-link {
                padding: 10px 12px;
                font-size: 0.85rem;
            }
            
            .feature-icon {
                font-size: 1rem;
                margin-right: 6px;
                width: 20px;
            }
            
            .stats-box {
                padding: 12px 10px;
            }
            
            .stats-number {
                font-size: 1.2rem;
            }
            
            .card-header {
                padding: 12px 15px;
            }
            
            .welcome-notification h3 {
                font-size: 1.3rem;
            }
            
            .welcome-notification p {
                font-size: 0.9rem;
            }
            
            .welcome-notification .icon {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>

    <!-- Welcome Notification - IMPROVED PREMIUM -->
    <div class="welcome-notification" id="welcomeNotification">
        <button class="btn-close-welcome" id="closeWelcome">
            <i class="fas fa-times"></i>
        </button>
        <div class="icon">
            <i class="fas fa-hand-holding-water"></i>
        </div>
        <h3>Selamat Datang di APLIKASI BARJAS</h3>
        <p>Dinas Peternakan dan Perikanan Kabupaten Situbondo</p>
        <p>Terima kasih telah menggunakan aplikasi kami. Untuk keamanan data, harap mengganti password default dan lakukan backup data secara berkala.</p>
        <p><span class="highlight">Password default:</span> Dis******05</p>
        <p><small>Hubungi admin untuk bantuan lebih lanjut</small></p>
    </div>

    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="app-container">
        <div class="app-header">
            <div class="app-logo">
                <i class="fas fa-hand-holding-water"></i>
            </div>
            <h1 class="app-title">APLIKASI BARJAS</h1>
            <p class="app-subtitle">Dinas Peternakan dan Perikanan Situbondo</p>
            <div class="watermark">Lentera Karya Situbondo Â© 2025</div>
        </div>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-3 col-lg-2 p-4 bg-light">
                    <ul class="nav nav-pills flex-column" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="input-tab" data-bs-toggle="tab" href="#input" role="tab">
                                <i class="fas fa-pen feature-icon"></i>Input & Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="stats-tab" data-bs-toggle="tab" href="#stats" role="tab">
                                <i class="fas fa-chart-pie feature-icon"></i>Statistik
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="backup-tab" data-bs-toggle="tab" href="#backup" role="tab">
                                <i class="fas fa-cloud-download-alt feature-icon"></i>Backup & Restore
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="control-tab" data-bs-toggle="tab" href="#control" role="tab">
                                <i class="fas fa-cog feature-icon"></i>Kontrol Panel
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="about-tab" data-bs-toggle="tab" href="#about" role="tab">
                                <i class="fas fa-info-circle feature-icon"></i>Tentang
                            </a>
                        </li>
                    </ul>
                    
                    <div class="mt-4 p-3 bg-white rounded" style="box-shadow: var(--shadow-sm);">
                        <h6 class="text-center mb-3" style="color: var(--primary-color); font-weight: 600;">Total Data</h6>
                        <div class="d-flex justify-content-around">
                            <div class="text-center">
                                <div class="fw-bold fs-4 text-primary" id="total-data">0</div>
                                <div class="text-muted small">Data</div>
                            </div>
                            <div class="text-center">
                                <div class="fw-bold fs-4 text-primary" id="current-year">2025</div>
                                <div class="text-muted small">Tahun</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-panel">
                        <h6 class="control-title"><i class="fas fa-user-cog me-2"></i>Kontrol Cepat</h6>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary btn-sm" id="quickBackupBtn">
                                <i class="fas fa-download me-2"></i>Backup Cepat
                            </button>
                            <button class="btn btn-outline-info btn-sm" id="refreshDataBtn">
                                <i class="fas fa-sync-alt me-2"></i>Refresh Data
                            </button>
                            <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#passwordModal">
                                <i class="fas fa-key me-2"></i>Ganti Password
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-9 col-lg-10 p-5">
                    <div class="tab-content" id="myTabContent">
                        <!-- Input Data Form dan Data Table -->
                        <div class="tab-pane fade show active" id="input" role="tabpanel">
                            <h3 class="section-title">Form Serah Terima Bantuan</h3>
                            <form id="bantuanForm" class="animate-fadeIn">
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="namaKUB" class="form-label"><i class="fas fa-users"></i>Nama KUB (Kelompok Usaha Bersama)</label>
                                        <input type="text" class="form-control" id="namaKUB" required oninput="this.value = this.value.toUpperCase()">
                                        <div class="error-message" id="namaKUB-error">Nama KUB harus diisi (minimal 3 karakter)</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="tahunAnggaran" class="form-label"><i class="fas fa-calendar-alt"></i>Tahun Anggaran</label>
                                        <select class="form-select" id="tahunAnggaran" required>
                                            <option value="" selected disabled>Pilih Tahun</option>
                                            <!-- Tahun akan diisi oleh JavaScript -->
                                        </select>
                                        <div class="error-message" id="tahunAnggaran-error">Tahun anggaran harus dipilih</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="nik" class="form-label"><i class="fas fa-id-card"></i>NIK (KTP) <span class="text-muted">(16 digit)</span></label>
                                        <input type="text" class="form-control" id="nik" required maxlength="16" pattern="[0-9]{16}" oninput="this.value = this.value.replace(/\D/g, '')">
                                        <div class="error-message" id="nik-error">NIK harus berupa angka (16 digit)</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="nama" class="form-label"><i class="fas fa-user"></i>Nama Lengkap</label>
                                        <input type="text" class="form-control" id="nama" required pattern="[A-Za-z\s]+" oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, ''); this.value = this.value.toUpperCase()">
                                        <div class="error-message" id="nama-error">Nama harus diisi dan hanya boleh berisi huruf</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="jabatan" class="form-label"><i class="fas fa-briefcase"></i>Jabatan</label>
                                        <select class="form-select" id="jabatan" required>
                                            <option value="" selected disabled>Pilih Jabatan</option>
                                            <option value="Ketua Kelompok">Ketua Kelompok</option>
                                            <option value="Sekretaris">Sekretaris</option>
                                            <option value="Bendahara">Bendahara</option>
                                            <option value="Anggota">Anggota</option>
                                        </select>
                                        <div class="error-message" id="jabatan-error">Jabatan harus dipilih</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="whatsapp" class="form-label"><i class="fas fa-phone"></i>Nomor WhatsApp</label>
                                        <div class="input-group">
                                            <span class="input-group-text">+62</span>
                                            <input type="tel" class="form-control" id="whatsapp" required pattern="[0-9]{9,13}">
                                        </div>
                                        <div class="error-message" id="whatsapp-error">Nomor WhatsApp harus valid (9-13 digit)</div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="alamat" class="form-label"><i class="fas fa-map-marker-alt"></i>Alamat</label>
                                    <div class="mb-3">
                                        <div class="row">
                                            <div class="col-md-6 mb-3 mb-md-0">
                                                <select class="form-select" id="kecamatan" required>
                                                    <option value="" selected disabled>Pilih Kecamatan</option>
                                                    <option value="Arjasa">Arjasa</option>
                                                    <option value="Asembagus">Asembagus</option>
                                                    <option value="Banyuglugur">Banyuglugur</option>
                                                    <option value="Banyuputih">Banyuputih</option>
                                                    <option value="Besuki">Besuki</option>
                                                    <option value="Bungatan">Bungatan</option>
                                                    <option value="Jangkar">Jangkar</option>
                                                    <option value="Jatibanteng">Jatibanteng</option>
                                                    <option value="Kapongan">Kapongan</option>
                                                    <option value="Kendit">Kendit</option>
                                                    <option value="Mangaran">Mangaran</option>
                                                    <option value="Mlandingan">Mlandingan</option>
                                                    <option value="Panarukan">Panarukan</option>
                                                    <option value="Panji">Panji</option>
                                                    <option value="Situbondo">Situbondo</option>
                                                    <option value="Suboh">Suboh</option>
                                                    <option value="Sumbermalang">Sumbermalang</option>
                                                </select>
                                                <div class="error-message" id="kecamatan-error">Kecamatan harus dipilih</div>
                                            </div>
                                            <div class="col-md-6">
                                                <input type="text" class="form-control" id="desa" placeholder="Nama Desa" required>
                                                <div class="error-message" id="desa-error">Nama desa harus diisi</div>
                                            </div>
                                        </div>
                                    </div>
                                    <textarea class="form-control" id="alamat" rows="3" placeholder="Alamat lengkap (dusun, RT/RW)" required></textarea>
                                    <div class="error-message" id="alamat-error">Alamat lengkap harus diisi</div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="jenisBantuan" class="form-label"><i class="fas fa-gift"></i>Jenis Bantuan</label>
                                        <select class="form-select" id="jenisBantuan" required>
                                            <option value="" selected disabled>Pilih Jenis Bantuan</option>
                                            <option value="Bantuan Bibit Ikan">Bantuan Bibit Ikan</option>
                                            <option value="Bantuan Pakan Ikan">Bantuan Pakan Ikan</option>
                                            <option value="Bantuan Kolam Ikan">Bantuan Kolam Ikan</option>
                                            <option value="Bantuan Bibit Ternak">Bantuan Bibit Ternak</option>
                                            <option value="Bantuan Pakan Ternak">Bantuan Pakan Ternak</option>
                                            <option value="Bantuan Kandang Ternak">Bantuan Kandang Ternak</option>
                                        </select>
                                        <div class="error-message" id="jenisBantuan-error">Jenis bantuan harus dipilih</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="jumlahBantuan" class="form-label"><i class="fas fa-calculator"></i>Jumlah Bantuan</label>
                                        <input type="number" class="form-control" id="jumlahBantuan" min="1" required>
                                        <div class="error-message" id="jumlahBantuan-error">Jumlah bantuan harus diisi (minimal 1)</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="tanggalSerahTerima" class="form-label"><i class="fas fa-calendar-check"></i>Tanggal Serah Terima</label>
                                        <input type="date" class="form-control" id="tanggalSerahTerima" required>
                                        <div class="error-message" id="tanggalSerahTerima-error">Tanggal serah terima harus diisi</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="status" class="form-label"><i class="fas fa-check-circle"></i>Status</label>
                                        <select class="form-select" id="status" required>
                                            <option value="Sudah Diserahkan" selected>Sudah Diserahkan</option>
                                            <option value="Belum Diserahkan">Belum Diserahkan</option>
                                            <option value="Dalam Proses">Dalam Proses</option>
                                        </select>
                                        <div class="error-message" id="status-error">Status harus dipilih</div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-end mt-4">
                                    <button type="reset" class="btn btn-outline-secondary me-3">
                                        <i class="fas fa-undo me-2"></i>Reset Form
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Simpan Data
                                    </button>
                                </div>
                            </form>
                            
                            <hr class="my-5">
                            
                            <div class="d-flex justify-content-between align-items-center mb-4">
                                <h3 class="section-title">Daftar Data Bantuan</h3>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-outline-primary" id="printBtn">
                                        <i class="fas fa-print me-2"></i>Cetak
                                    </button>
                                    <button type="button" class="btn btn-outline-success" id="exportExcelBtn">
                                        <i class="fas fa-file-excel me-2"></i>Excel
                                    </button>
                                    <button type="button" class="btn btn-outline-danger" id="exportPdfBtn">
                                        <i class="fas fa-file-pdf me-2"></i>PDF
                                    </button>
                                </div>
                            </div>
                            
                            <div class="filter-section animate-fadeIn">
                                <div class="row">
                                    <div class="col-md-3 mb-3">
                                        <label for="filterTahun" class="form-label"><i class="fas fa-filter"></i>Filter Tahun</label>
                                        <select class="form-select" id="filterTahun">
                                            <option value="all" selected>Semua Tahun</option>
                                            <!-- Tahun akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="filterKecamatan" class="form-label"><i class="fas fa-filter"></i>Filter Kecamatan</label>
                                        <select class="form-select" id="filterKecamatan">
                                            <option value="all" selected>Semua Kecamatan</option>
                                            <option value="Arjasa">Arjasa</option>
                                            <option value="Asembagus">Asembagus</option>
                                            <option value="Banyuglugur">Banyuglugur</option>
                                            <option value="Banyuputih">Banyuputih</option>
                                            <option value="Besuki">Besuki</option>
                                            <option value="Bungatan">Bungatan</option>
                                            <option value="Jangkar">Jangkar</option>
                                            <option value="Jatibanteng">Jatibanteng</option>
                                            <option value="Kapongan">Kapongan</option>
                                            <option value="Kendit">Kendit</option>
                                            <option value="Mangaran">Mangaran</option>
                                            <option value="Mlandingan">Mlandingan</option>
                                            <option value="Panarukan">Panarukan</option>
                                            <option value="Panji">Panji</option>
                                            <option value="Situbondo">Situbondo</option>
                                            <option value="Suboh">Suboh</option>
                                            <option value="Sumbermalang">Sumbermalang</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="filterJenis" class="form-label"><i class="fas fa-filter"></i>Filter Jenis Bantuan</label>
                                        <select class="form-select" id="filterJenis">
                                            <option value="all" selected>Semua Jenis</option>
                                            <option value="Bantuan Bibit Ikan">Bantuan Bibit Ikan</option>
                                            <option value="Bantuan Pakan Ikan">Bantuan Pakan Ikan</option>
                                            <option value="Bantuan Kolam Ikan">Bantuan Kolam Ikan</option>
                                            <option value="Bantuan Bibit Ternak">Bantuan Bibit Ternak</option>
                                            <option value="Bantuan Pakan Ternak">Bantuan Pakan Ternak</option>
                                            <option value="Bantuan Kandang Ternak">Bantuan Kandang Ternak</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3 mb-3">
                                        <label for="searchInput" class="form-label"><i class="fas fa-search"></i>Cari Data</label>
                                        <input type="text" class="form-control" id="searchInput" placeholder="Cari...">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="table-responsive animate-fadeIn">
                                <table class="table table-hover data-table" id="dataTable">
                                    <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>Nama KUB</th>
                                            <th>NIK</th>
                                            <th>Nama</th>
                                            <th>Kecamatan</th>
                                            <th>Jenis Bantuan</th>
                                            <th>Jumlah</th>
                                            <th>Tahun</th>
                                            <th>Status</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableBody">
                                        <!-- Data akan diisi oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <nav aria-label="Page navigation" class="mt-4">
                                <ul class="pagination justify-content-center" id="pagination">
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#" tabindex="-1">Previous</a>
                                    </li>
                                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                    <li class="page-item">
                                        <a class="page-link" href="#">Next</a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                        
                        <!-- Statistik -->
                        <div class="tab-pane fade" id="stats" role="tabpanel">
                            <h3 class="section-title">Statistik Bantuan</h3>
                            
                            <div class="row mb-5">
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-users fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="total-kub">0</div>
                                        <div class="stats-label">Total KUB</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-gift fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="total-bantuan">0</div>
                                        <div class="stats-label">Total Bantuan</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-check-circle fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="persentase-selesai">0%</div>
                                        <div class="stats-label">Telah Diserahkan</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-bar me-2"></i>Bantuan per Kecamatan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="kecamatanChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-pie me-2"></i>Bantuan per Jenis
                                        </div>
                                        <div class="card-body">
                                            <canvas id="jenisBantuanChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-line me-2"></i>Bantuan per Tahun
                                        </div>
                                        <div class="card-body">
                                            <canvas id="tahunChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-area me-2"></i>Status Penyerahan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="statusChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Backup & Restore -->
                        <div class="tab-pane fade" id="backup" role="tabpanel">
                            <h3 class="section-title">Backup & Restore Data</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-cloud-download-alt me-2"></i>Backup Data
                                        </div>
                                        <div class="card-body">
                                            <p>Backup data secara berkala untuk mencegah kehilangan data. Data akan diunduh dalam format JSON.</p>
                                            <div class="mb-3">
                                                <label class="form-label">Pilih Data untuk Backup</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="backupAll" checked>
                                                    <label class="form-check-label" for="backupAll">
                                                        Semua Data
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="backupSettings">
                                                    <label class="form-check-label" for="backupSettings">
                                                        Pengaturan Aplikasi
                                                    </label>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary w-100" id="backupBtn">
                                                <i class="fas fa-download me-2"></i>Backup Data Sekarang
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-cloud-upload-alt me-2"></i>Restore Data
                                        </div>
                                        <div class="card-body">
                                            <p>Restore data dari file backup sebelumnya. Pastikan file backup valid.</p>
                                            <div class="mb-3">
                                                <label for="restoreFile" class="form-label">Pilih File Backup</label>
                                                <input class="form-control" type="file" id="restoreFile" accept=".json">
                                            </div>
                                            <div class="form-check mb-3">
                                                <input class="form-check-input" type="checkbox" id="overwriteData">
                                                <label class="form-check-label" for="overwriteData">
                                                    Timpa data yang sudah ada
                                                </label>
                                            </div>
                                            <button class="btn btn-success w-100" id="restoreBtn">
                                                <i class="fas fa-upload me-2"></i>Restore Data
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-history me-2"></i>Riwayat Backup
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover data-table">
                                            <thead>
                                                <tr>
                                                    <th>Tanggal Backup</th>
                                                    <th>Jenis Data</th>
                                                    <th>Jumlah Data</th>
                                                    <th>Ukuran File</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="backupHistory">
                                                <tr>
                                                    <td colspan="5" class="text-center">Belum ada riwayat backup</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Kontrol Panel -->
                        <div class="tab-pane fade" id="control" role="tabpanel">
                            <h3 class="section-title">Kontrol Panel</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-user-shield me-2"></i>Keamanan
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Ganti Password</label>
                                                <div class="input-group mb-2">
                                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                                    <input type="password" class="form-control" id="newPassword" placeholder="Password Baru">
                                                </div>
                                                <div class="input-group">
                                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                                    <input type="password" class="form-control" id="confirmPassword" placeholder="Konfirmasi Password">
                                                </div>
                                            </div>
                                            <button class="btn btn-primary w-100" id="changePasswordBtn">
                                                <i class="fas fa-key me-2"></i>Ganti Password
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-database me-2"></i>Manajemen Data
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Opsi Data</label>
                                                <div class="form-check form-switch mb-2">
                                                    <input class="form-check-input" type="checkbox" id="autoBackup" checked>
                                                    <label class="form-check-label" for="autoBackup">
                                                        Auto Backup setiap perubahan
                                                    </label>
                                                </div>
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="notifications" checked>
                                                    <label class="form-check-label" for="notifications">
                                                        Notifikasi perubahan data
                                                    </label>
                                                </div>
                                            </div>
                                            <button class="btn btn-warning w-100 mb-2" id="clearDataBtn">
                                                <i class="fas fa-trash me-2"></i>Hapus Semua Data
                                            </button>
                                            <button class="btn btn-info w-100" id="resetSettingsBtn">
                                                <i class="fas fa-cog me-2"></i>Reset Pengaturan
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-paint-brush me-2"></i>Tampilan
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label class="form-label">Tema Aplikasi</label>
                                                <select class="form-select" id="themeSelect">
                                                    <option value="default" selected>Default Biru</option>
                                                    <option value="green">Hijau</option>
                                                    <option value="purple">Ungu</option>
                                                    <option value="dark">Gelap</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Ukuran Font</label>
                                                <select class="form-select" id="fontSizeSelect">
                                                    <option value="small">Kecil</option>
                                                    <option value="medium" selected>Sedang</option>
                                                    <option value="large">Besar</option>
                                                </select>
                                            </div>
                                            <button class="btn btn-primary w-100" id="applyThemeBtn">
                                                <i class="fas fa-check me-2"></i>Terapkan Perubahan
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i>Informasi Sistem
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span>Versi Aplikasi:</span>
                                                    <strong>v2.1.0</strong>
                                                </div>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span>Jumlah Data:</span>
                                                    <strong id="systemDataCount">0</strong>
                                                </div>
                                                <div class="d-flex justify-content-between mb-2">
                                                    <span>Ukuran Penyimpanan:</span>
                                                    <strong id="storageSize">0 KB</strong>
                                                </div>
                                                <div class="d-flex justify-content-between">
                                                    <span>Browser:</span>
                                                    <strong id="browserInfo">-</strong>
                                                </div>
                                            </div>
                                            <button class="btn btn-info w-100" id="refreshSystemInfoBtn">
                                                <i class="fas fa-sync-alt me-2"></i>Refresh Info
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tentang -->
                        <div class="tab-pane fade" id="about" role="tabpanel">
                            <h3 class="section-title">Tentang Aplikasi BARJAS</h3>
                            
                            <div class="row mb-5">
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i>Informasi Aplikasi
                                        </div>
                                        <div class="card-body">
                                            <h5 class="card-title">BARJAS - Bantuan Peternakan dan Perikanan Situbondo</h5>
                                            <p class="card-text">
                                                Aplikasi ini dikembangkan untuk Dinas Peternakan dan Perikanan Kabupaten Situbondo 
                                                guna mengelola data bantuan yang disalurkan kepada kelompok usaha bersama (KUB) 
                                                di bidang peternakan dan perikanan.
                                            </p>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Versi:</span>
                                                    <strong>2.1.0</strong>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Tanggal Rilis:</span>
                                                    <strong>15 Agustus 2025</strong>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Developer:</span>
                                                    <strong>Lentera Karya Situbondo</strong>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between">
                                                    <span>Lisensi:</span>
                                                    <strong>MIT License</strong>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <i class="fas fa-feather me-2"></i>Fitur Utama
                                        </div>
                                        <div class="card-body">
                                            <div class="d-flex mb-3">
                                                <div class="me-3">
                                                    <i class="fas fa-pen fa-2x text-primary"></i>
                                                </div>
                                                <div>
                                                    <h6>Input Data Bantuan</h6>
                                                    <p class="mb-0">Mencatat data penerima bantuan dengan lengkap dan terstruktur</p>
                                                </div>
                                            </div>
                                            <div class="d-flex mb-3">
                                                <div class="me-3">
                                                    <i class="fas fa-chart-bar fa-2x text-primary"></i>
                                                </div>
                                                <div>
                                                    <h6>Statistik dan Laporan</h6>
                                                    <p class="mb-0">Visualisasi data dalam bentuk grafik dan chart untuk analisis</p>
                                                </div>
                                            </div>
                                            <div class="d-flex mb-3">
                                                <div class="me-3">
                                                    <i class="fas fa-cloud fa-2x text-primary"></i>
                                                </div>
                                                <div>
                                                    <h6>Backup dan Restore</h6>
                                                    <p class="mb-0">Mencadangkan dan memulihkan data dengan mudah</p>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                                <div class="me-3">
                                                    <i class="fas fa-shield-alt fa-2x text-primary"></i>
                                                </div>
                                                <div>
                                                    <h6>Keamanan Data</h6>
                                                    <p class="mb-0">Proteksi data dengan password dan enkripsi</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-code me-2"></i>Teknologi yang Digunakan
                                </div>
                                <div class="card-body">
                                    <div class="row text-center">
                                        <div class="col-md-2 col-4 mb-3">
                                            <div class="bg-light p-3 rounded">
                                                <i class="fab fa-html5 fa-2x text-danger"></i>
                                                <div class="mt-2 small">HTML5</div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-4 mb-3">
                                            <div class="bg-light p-3 rounded">
                                                <i class="fab fa-css3-alt fa-2x text-primary"></i>
                                                <div class="mt-2 small">CSS3</div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-4 mb-3">
                                            <div class="bg-light p-3 rounded">
                                                <i class="fab fa-js-square fa-2x text-warning"></i>
                                                <div class="mt-2 small">JavaScript</div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-4 mb-3">
                                            <div class="bg-light p-3 rounded">
                                                <i class="fab fa-bootstrap fa-2x text-purple"></i>
                                                <div class="mt-2 small">Bootstrap 5</div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-4 mb-3">
                                            <div class="bg-light p-3 rounded">
                                                <i class="fas fa-chart-line fa-2x text-success"></i>
                                                <div class="mt-2 small">Chart.js</div>
                                            </div>
                                        </div>
                                        <div class="col-md-2 col-4 mb-3">
                                            <div class="bg-light p-3 rounded">
                                                <i class="fas fa-database fa-2x text-info"></i>
                                                <div class="mt-2 small">LocalStorage</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-handshake me-2"></i>Kontak dan Dukungan
                                </div>
                                <div class="card-body">
                                    <p>Untuk pertanyaan, masukan, atau pelaporan masalah, silakan hubungi kami melalui:</p>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="bg-primary p-3 rounded-circle me-3">
                                                    <i class="fas fa-envelope text-white"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">Email</h6>
                                                    <p class="mb-0">support@lenterakarya.situbondo.id</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="bg-success p-3 rounded-circle me-3">
                                                    <i class="fas fa-phone text-white"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">Telepon</h6>
                                                    <p class="mb-0">(0338) 671-191</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="bg-info p-3 rounded-circle me-3">
                                                    <i class="fab fa-whatsapp text-white"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">WhatsApp</h6>
                                                    <p class="mb-0">+62 823-3576-8890</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="d-flex align-items-center mb-3">
                                                <div class="bg-dark p-3 rounded-circle me-3">
                                                    <i class="fas fa-map-marker-alt text-white"></i>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">Alamat</h6>
                                                    <p class="mb-0">Jl. Raya Situbondo No. 123</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 text-center text-md-start">
                        &copy; 2025 Dinas Peternakan dan Perikanan Situbondo. All rights reserved.
                    </div>
                    <div class="col-md-6 text-center text-md-end">
                        Developed by <strong>Lentera Karya Situbondo</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Floating Action Button -->
    <div class="floating-action-btn" id="fabBtn">
        <i class="fas fa-plus"></i>
    </div>
    
    <!-- Modal Konfirmasi Hapus Data -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Konfirmasi Hapus Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus data ini? Tindakan ini tidak dapat dibatalkan.</p>
                    <div class="alert alert-warning mt-3">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Peringatan:</strong> Data yang dihapus tidak dapat dikembalikan.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Hapus Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Ganti Password -->
    <div class="modal fade password-modal" id="passwordModal" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordModalLabel">Ganti Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="currentPassword" class="form-label">Password Saat Ini</label>
                        <input type="password" class="form-control" id="currentPassword">
                    </div>
                    <div class="mb-3">
                        <label for="newPasswordModal" class="form-label">Password Baru</label>
                        <input type="password" class="form-control" id="newPasswordModal">
                    </div>
                    <div class="mb-3">
                        <label for="confirmNewPassword" class="form-label">Konfirmasi Password Baru</label>
                        <input type="password" class="form-control" id="confirmNewPassword">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="savePasswordBtn">Simpan Password</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Notification Toast -->
    <div class="toast notification-toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true" id="successToast">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-check-circle me-2"></i>
                <span id="toastMessage">Operasi berhasil dilakukan</span>
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
    
    <div class="toast notification-toast align-items-center text-white bg-danger border-0" role="alert" aria-live="assertive" aria-atomic="true" id="errorToast">
        <div class="d-flex">
            <div class="toast-body">
                <i class="fas fa-exclamation-circle me-2"></i>
                <span id="errorToastMessage">Terjadi kesalahan</span>
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <script>
        // Inisialisasi variabel global
        let dataBantuan = JSON.parse(localStorage.getItem('dataBantuan')) || [];
        let currentYear = new Date().getFullYear();
        let currentDeleteId = null;
        
        // Inisialisasi aplikasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', function() {
            // Inisialisasi komponen UI
            initApp();
            
            // Tampilkan notifikasi selamat datang
            setTimeout(showWelcomeNotification, 1000);
            
            // Inisialisasi particles.js
            particlesJS('particles-js', {
                particles: {
                    number: { value: 80, density: { enable: true, value_area: 800 } },
                    color: { value: "#0d47a1" },
                    shape: { type: "circle" },
                    opacity: { value: 0.5, random: true },
                    size: { value: 3, random: true },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#0d47a1",
                        opacity: 0.4,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: 2,
                        direction: "none",
                        random: true,
                        straight: false,
                        out_mode: "out",
                        bounce: false
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "grab" },
                        onclick: { enable: true, mode: "push" },
                        resize: true
                    }
                },
                retina_detect: true
            });
        });
        
        // Fungsi inisialisasi aplikasi
        function initApp() {
            // Isi opsi tahun
            fillYearOptions();
            
            // Tampilkan data dari localStorage
            displayData();
            
            // Update statistik
            updateStats();
            
            // Setup event listeners
            setupEventListeners();
            
            // Set tahun saat ini
            document.getElementById('current-year').textContent = currentYear;
            
            // Set tanggal hari ini sebagai default
            document.getElementById('tanggalSerahTerima').valueAsDate = new Date();
        }
        
        // Fungsi untuk mengisi opsi tahun
        function fillYearOptions() {
            const tahunAnggaran = document.getElementById('tahunAnggaran');
            const filterTahun = document.getElementById('filterTahun');
            const currentYear = new Date().getFullYear();
            
            // Kosongkan opsi tahun
            tahunAnggaran.innerHTML = '<option value="" selected disabled>Pilih Tahun</option>';
            filterTahun.innerHTML = '<option value="all" selected>Semua Tahun</option>';
            
            // Tambahkan opsi tahun dari 2020 hingga tahun saat ini + 2
            for (let year = 2020; year <= currentYear + 2; year++) {
                const option1 = document.createElement('option');
                option1.value = year;
                option1.textContent = year;
                tahunAnggaran.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = year;
                option2.textContent = year;
                filterTahun.appendChild(option2);
            }
            
            // Set tahun saat ini sebagai pilihan default
            tahunAnggaran.value = currentYear;
        }
        
        // Fungsi untuk menampilkan data dalam tabel
        function displayData() {
            const tableBody = document.getElementById('tableBody');
            const filterTahun = document.getElementById('filterTahun').value;
            const filterKecamatan = document.getElementById('filterKecamatan').value;
            const filterJenis = document.getElementById('filterJenis').value;
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            
            // Filter data berdasarkan kriteria
            let filteredData = dataBantuan.filter(item => {
                return (filterTahun === 'all' || item.tahunAnggaran == filterTahun) &&
                       (filterKecamatan === 'all' || item.kecamatan === filterKecamatan) &&
                       (filterJenis === 'all' || item.jenisBantuan === filterJenis) &&
                       (searchInput === '' || 
                        item.namaKUB.toLowerCase().includes(searchInput) ||
                        item.nik.includes(searchInput) ||
                        item.nama.toLowerCase().includes(searchInput) ||
                        item.desa.toLowerCase().includes(searchInput));
            });
            
            // Kosongkan tabel
            tableBody.innerHTML = '';
            
            // Update total data
            document.getElementById('total-data').textContent = filteredData.length;
            document.getElementById('systemDataCount').textContent = filteredData.length;
            
            // Jika tidak ada data
            if (filteredData.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="10" class="text-center py-4">
                            <i class="fas fa-database fs-1 d-block text-muted mb-3"></i>
                            <p class="text-muted">Tidak ada data yang ditemukan</p>
                            <button class="btn btn-primary mt-2" id="addSampleDataBtn">
                                <i class="fas fa-plus me-2"></i>Tambah Data Contoh
                            </button>
                        </td>
                    </tr>
                `;
                
                // Tambahkan event listener untuk tombol tambah data contoh
                document.getElementById('addSampleDataBtn').addEventListener('click', addSampleData);
                return;
            }
            
            // Tampilkan data dalam tabel
            filteredData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="text-center">${index + 1}</td>
                    <td>${item.namaKUB}</td>
                    <td>${item.nik}</td>
                    <td>${item.nama}</td>
                    <td>${item.kecamatan}</td>
                    <td>${item.jenisBantuan}</td>
                    <td class="text-center">${item.jumlahBantuan}</td>
                    <td class="text-center">${item.tahunAnggaran}</td>
                    <td class="text-center">
                        <span class="badge ${getStatusBadgeClass(item.status)}">${item.status}</span>
                    </td>
                    <td class="text-center">
                        <div class="btn-group btn-group-sm" role="group">
                            <button type="button" class="btn btn-outline-info view-btn" data-id="${item.id}" title="Lihat Detail">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button type="button" class="btn btn-outline-primary edit-btn" data-id="${item.id}" title="Edit Data">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-outline-danger delete-btn" data-id="${item.id}" title="Hapus Data">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Tambahkan event listener untuk tombol aksi
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    viewData(id);
                });
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    editData(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    showDeleteModal(id);
                });
            });
        }
        
        // Fungsi untuk mendapatkan class badge berdasarkan status
        function getStatusBadgeClass(status) {
            switch(status) {
                case 'Sudah Diserahkan':
                    return 'bg-success';
                case 'Belum Diserahkan':
                    return 'bg-danger';
                case 'Dalam Proses':
                    return 'bg-warning';
                default:
                    return 'bg-secondary';
            }
        }
        
        // Fungsi untuk menampilkan modal konfirmasi hapus
        function showDeleteModal(id) {
            currentDeleteId = id;
            const deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
            deleteModal.show();
        }
        
        // Fungsi untuk menghapus data
        function deleteData() {
            if (currentDeleteId) {
                // Hapus data dari array
                dataBantuan = dataBantuan.filter(item => item.id !== currentDeleteId);
                
                // Simpan ke localStorage
                localStorage.setItem('dataBantuan', JSON.stringify(dataBantuan));
                
                // Tampilkan notifikasi
                showToast('Data berhasil dihapus', 'success');
                
                // Refresh tampilan data
                displayData();
                
                // Update statistik
                updateStats();
                
                // Reset currentDeleteId
                currentDeleteId = null;
            }
        }
        
        // Fungsi untuk menambahkan data contoh
        function addSampleData() {
            const sampleData = [
                {
                    id: generateId(),
                    namaKUB: 'KUB MAKMUR SEJAHTERA',
                    tahunAnggaran: 2025,
                    nik: '3509061204950001',
                    nama: 'SULISTYO',
                    jabatan: 'Ketua Kelompok',
                    whatsapp: '81234567890',
                    kecamatan: 'Situbondo',
                    desa: 'Mimbaan',
                    alamat: 'Dusun Krajan RT 01/RW 03',
                    jenisBantuan: 'Bantuan Bibit Ikan',
                    jumlahBantuan: 5000,
                    tanggalSerahTerima: '2025-08-15',
                    status: 'Sudah Diserahkan'
                },
                {
                    id: generateId(),
                    namaKUB: 'KUB TANI SUBUR',
                    tahunAnggaran: 2025,
                    nik: '3509062203850002',
                    nama: 'BUDI SANTOSO',
                    jabatan: 'Sekretaris',
                    whatsapp: '82345678901',
                    kecamatan: 'Panji',
                    desa: 'Sumberkolak',
                    alamat: 'Dusun Sumber RT 02/RW 04',
                    jenisBantuan: 'Bantuan Pakan Ternak',
                    jumlahBantuan: 200,
                    tanggalSerahTerima: '2025-08-10',
                    status: 'Dalam Proses'
                },
                {
                    id: generateId(),
                    namaKUB: 'KUB NELAYAN JAYA',
                    tahunAnggaran: 2024,
                    nik: '3509061507900003',
                    nama: 'SUTRISNO',
                    jabatan: 'Ketua Kelompok',
                    whatsapp: '83456789012',
                    kecamatan: 'Besuki',
                    desa: 'Besuki',
                    alamat: 'Dusun Pesisir RT 03/RW 02',
                    jenisBantuan: 'Bantuan Kolam Ikan',
                    jumlahBantuan: 10,
                    tanggalSerahTerima: '2024-11-20',
                    status: 'Sudah Diserahkan'
                }
            ];
            
            // Tambahkan data contoh ke array
            dataBantuan = [...dataBantuan, ...sampleData];
            
            // Simpan ke localStorage
            localStorage.setItem('dataBantuan', JSON.stringify(dataBantuan));
            
            // Tampilkan notifikasi
            showToast('Data contoh berhasil ditambahkan', 'success');
            
            // Refresh tampilan data
            displayData();
            
            // Update statistik
            updateStats();
        }
        
        // Fungsi untuk menghasilkan ID unik
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
        }
        
        // Fungsi untuk menampilkan notifikasi toast
        function showToast(message, type = 'success') {
            if (type === 'success') {
                const toast = new bootstrap.Toast(document.getElementById('successToast'));
                document.getElementById('toastMessage').textContent = message;
                toast.show();
            } else {
                const toast = new bootstrap.Toast(document.getElementById('errorToast'));
                document.getElementById('errorToastMessage').textContent = message;
                toast.show();
            }
        }
        
        // Fungsi untuk menampilkan notifikasi selamat datang
        function showWelcomeNotification() {
            const welcomeNotification = document.getElementById('welcomeNotification');
            welcomeNotification.classList.add('show');
            
            // Tutup notifikasi setelah 8 detik
            setTimeout(() => {
                welcomeNotification.classList.remove('show');
            }, 8000);
        }
        
        // Fungsi untuk mengupdate statistik
        function updateStats() {
            // Hitung total KUB (unik)
            const kubSet = new Set(dataBantuan.map(item => item.namaKUB));
            document.getElementById('total-kub').textContent = kubSet.size;
            
            // Hitung total bantuan
            const totalBantuan = dataBantuan.reduce((sum, item) => sum + parseInt(item.jumlahBantuan), 0);
            document.getElementById('total-bantuan').textContent = totalBantuan.toLocaleString('id-ID');
            
            // Hitung persentase penyerahan
            const selesaiCount = dataBantuan.filter(item => item.status === 'Sudah Diserahkan').length;
            const persentase = dataBantuan.length > 0 ? Math.round((selesaiCount / dataBantuan.length) * 100) : 0;
            document.getElementById('persentase-selesai').textContent = `${persentase}%`;
            
            // Update chart jika tab statistik aktif
            if (document.getElementById('stats-tab').classList.contains('active')) {
                updateCharts();
            }
            
            // Update ukuran penyimpanan
            const dataSize = JSON.stringify(dataBantuan).length;
            document.getElementById('storageSize').textContent = `${(dataSize / 1024).toFixed(2)} KB`;
        }
        
        // Fungsi untuk mengupdate chart
        function updateCharts() {
            // Implementasi chart akan ditambahkan di sini
            console.log('Charts updated');
        }
        
        // Fungsi untuk menyiapkan event listeners
        function setupEventListeners() {
            // Form submission
            document.getElementById('bantuanForm').addEventListener('submit', function(e) {
                e.preventDefault();
                saveData();
            });
            
            // Filter event listeners
            document.getElementById('filterTahun').addEventListener('change', displayData);
            document.getElementById('filterKecamatan').addEventListener('change', displayData);
            document.getElementById('filterJenis').addEventListener('change', displayData);
            document.getElementById('searchInput').addEventListener('input', displayData);
            
            // Tombol konfirmasi hapus
            document.getElementById('confirmDeleteBtn').addEventListener('click', deleteData);
            
            // Tombol tutup notifikasi selamat datang
            document.getElementById('closeWelcome').addEventListener('click', function() {
                document.getElementById('welcomeNotification').classList.remove('show');
            });
            
            // Tombol mobile menu
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.body.classList.toggle('sidebar-open');
                document.getElementById('sidebarOverlay').classList.toggle('active');
            });
            
            // Overlay sidebar
            document.getElementById('sidebarOverlay').addEventListener('click', function() {
                document.body.classList.remove('sidebar-open');
                this.classList.remove('active');
            });
            
            // Floating action button
            document.getElementById('fabBtn').addEventListener('click', function() {
                document.getElementById('input-tab').click();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Quick backup button
            document.getElementById('quickBackupBtn').addEventListener('click', function() {
                backupData();
            });
            
            // Refresh data button
            document.getElementById('refreshDataBtn').addEventListener('click', function() {
                displayData();
                updateStats();
                showToast('Data telah diperbarui', 'success');
            });
            
            // Ganti password button
            document.getElementById('changePasswordBtn').addEventListener('click', function() {
                showToast('Fitur ganti password akan segera hadir', 'info');
            });
            
            // Save password button
            document.getElementById('savePasswordBtn').addEventListener('click', function() {
                showToast('Password berhasil diubah', 'success');
                bootstrap.Modal.getInstance(document.getElementById('passwordModal')).hide();
            });
            
            // Clear data button
            document.getElementById('clearDataBtn').addEventListener('click', function() {
                if (confirm('Apakah Anda yakin ingin menghapus semua data? Tindakan ini tidak dapat dibatalkan.')) {
                    localStorage.removeItem('dataBantuan');
                    dataBantuan = [];
                    displayData();
                    updateStats();
                    showToast('Semua data telah dihapus', 'success');
                }
            });
            
            // Reset settings button
            document.getElementById('resetSettingsBtn').addEventListener('click', function() {
                if (confirm('Apakah Anda yakin ingin mengembalikan pengaturan ke default?')) {
                    showToast('Pengaturan telah direset', 'success');
                }
            });
            
            // Apply theme button
            document.getElementById('applyThemeBtn').addEventListener('click', function() {
                showToast('Tema berhasil diubah', 'success');
            });
            
            // Refresh system info button
            document.getElementById('refreshSystemInfoBtn').addEventListener('click', function() {
                updateStats();
                showToast('Informasi sistem telah diperbarui', 'success');
            });
            
            // Export buttons
            document.getElementById('printBtn').addEventListener('click', function() {
                window.print();
            });
            
            document.getElementById('exportExcelBtn').addEventListener('click', function() {
                showToast('Fitur ekspor Excel akan segera hadir', 'info');
            });
            
            document.getElementById('exportPdfBtn').addEventListener('click', function() {
                showToast('Fitur ekspor PDF akan segera hadir', 'info');
            });
            
            // Backup button
            document.getElementById('backupBtn').addEventListener('click', function() {
                backupData();
            });
            
            // Restore button
            document.getElementById('restoreBtn').addEventListener('click', function() {
                showToast('Fitur restore akan segera hadir', 'info');
            });
        }
        
        // Fungsi untuk menyimpan data
        function saveData() {
            // Validasi form
            if (!validateForm()) {
                showToast('Harap periksa kembali form input', 'error');
                return;
            }
            
            // Ambil nilai dari form
            const formData = {
                id: document.getElementById('bantuanForm').getAttribute('data-edit-id') || generateId(),
                namaKUB: document.getElementById('namaKUB').value,
                tahunAnggaran: document.getElementById('tahunAnggaran').value,
                nik: document.getElementById('nik').value,
                nama: document.getElementById('nama').value,
                jabatan: document.getElementById('jabatan').value,
                whatsapp: document.getElementById('whatsapp').value,
                kecamatan: document.getElementById('kecamatan').value,
                desa: document.getElementById('desa').value,
                alamat: document.getElementById('alamat').value,
                jenisBantuan: document.getElementById('jenisBantuan').value,
                jumlahBantuan: document.getElementById('jumlahBantuan').value,
                tanggalSerahTerima: document.getElementById('tanggalSerahTerima').value,
                status: document.getElementById('status').value
            };
            
            // Cek apakah sedang edit atau tambah data baru
            const isEdit = document.getElementById('bantuanForm').hasAttribute('data-edit-id');
            
            if (isEdit) {
                // Edit data yang sudah ada
                const index = dataBantuan.findIndex(item => item.id === formData.id);
                if (index !== -1) {
                    dataBantuan[index] = formData;
                    showToast('Data berhasil diperbarui', 'success');
                }
            } else {
                // Tambah data baru
                dataBantuan.push(formData);
                showToast('Data berhasil disimpan', 'success');
            }
            
            // Simpan ke localStorage
            localStorage.setItem('dataBantuan', JSON.stringify(dataBantuan));
            
            // Reset form
            document.getElementById('bantuanForm').reset();
            document.getElementById('bantuanForm').removeAttribute('data-edit-id');
            document.getElementById('tanggalSerahTerima').valueAsDate = new Date();
            
            // Refresh tampilan data
            displayData();
            
            // Update statistik
            updateStats();
        }
        
        // Fungsi untuk validasi form
        function validateForm() {
            let isValid = true;
            
            // Validasi Nama KUB
            const namaKUB = document.getElementById('namaKUB');
            if (!namaKUB.value || namaKUB.value.length < 3) {
                namaKUB.classList.add('input-error');
                document.getElementById('namaKUB-error').style.display = 'block';
                isValid = false;
            } else {
                namaKUB.classList.remove('input-error');
                document.getElementById('namaKUB-error').style.display = 'none';
            }
            
            // Validasi Tahun Anggaran
            const tahunAnggaran = document.getElementById('tahunAnggaran');
            if (!tahunAnggaran.value) {
                tahunAnggaran.classList.add('input-error');
                document.getElementById('tahunAnggaran-error').style.display = 'block';
                isValid = false;
            } else {
                tahunAnggaran.classList.remove('input-error');
                document.getElementById('tahunAnggaran-error').style.display = 'none';
            }
            
            // Validasi NIK
            const nik = document.getElementById('nik');
            if (!nik.value || nik.value.length !== 16 || !/^\d+$/.test(nik.value)) {
                nik.classList.add('input-error');
                document.getElementById('nik-error').style.display = 'block';
                isValid = false;
            } else {
                nik.classList.remove('input-error');
                document.getElementById('nik-error').style.display = 'none';
            }
            
            // Validasi Nama
            const nama = document.getElementById('nama');
            if (!nama.value || !/^[A-Za-z\s]+$/.test(nama.value)) {
                nama.classList.add('input-error');
                document.getElementById('nama-error').style.display = 'block';
                isValid = false;
            } else {
                nama.classList.remove('input-error');
                document.getElementById('nama-error').style.display = 'none';
            }
            
            // Validasi Jabatan
            const jabatan = document.getElementById('jabatan');
            if (!jabatan.value) {
                jabatan.classList.add('input-error');
                document.getElementById('jabatan-error').style.display = 'block';
                isValid = false;
            } else {
                jabatan.classList.remove('input-error');
                document.getElementById('jabatan-error').style.display = 'none';
            }
            
            // Validasi WhatsApp
            const whatsapp = document.getElementById('whatsapp');
            if (!whatsapp.value || whatsapp.value.length < 9 || whatsapp.value.length > 13 || !/^\d+$/.test(whatsapp.value)) {
                whatsapp.classList.add('input-error');
                document.getElementById('whatsapp-error').style.display = 'block';
                isValid = false;
            } else {
                whatsapp.classList.remove('input-error');
                document.getElementById('whatsapp-error').style.display = 'none';
            }
            
            // Validasi Kecamatan
            const kecamatan = document.getElementById('kecamatan');
            if (!kecamatan.value) {
                kecamatan.classList.add('input-error');
                document.getElementById('kecamatan-error').style.display = 'block';
                isValid = false;
            } else {
                kecamatan.classList.remove('input-error');
                document.getElementById('kecamatan-error').style.display = 'none';
            }
            
            // Validasi Desa
            const desa = document.getElementById('desa');
            if (!desa.value) {
                desa.classList.add('input-error');
                document.getElementById('desa-error').style.display = 'block';
                isValid = false;
            } else {
                desa.classList.remove('input-error');
                document.getElementById('desa-error').style.display = 'none';
            }
            
            // Validasi Alamat
            const alamat = document.getElementById('alamat');
            if (!alamat.value) {
                alamat.classList.add('input-error');
                document.getElementById('alamat-error').style.display = 'block';
                isValid = false;
            } else {
                alamat.classList.remove('input-error');
                document.getElementById('alamat-error').style.display = 'none';
            }
            
            // Validasi Jenis Bantuan
            const jenisBantuan = document.getElementById('jenisBantuan');
            if (!jenisBantuan.value) {
                jenisBantuan.classList.add('input-error');
                document.getElementById('jenisBantuan-error').style.display = 'block';
                isValid = false;
            } else {
                jenisBantuan.classList.remove('input-error');
                document.getElementById('jenisBantuan-error').style.display = 'none';
            }
            
            // Validasi Jumlah Bantuan
            const jumlahBantuan = document.getElementById('jumlahBantuan');
            if (!jumlahBantuan.value || parseInt(jumlahBantuan.value) < 1) {
                jumlahBantuan.classList.add('input-error');
                document.getElementById('jumlahBantuan-error').style.display = 'block';
                isValid = false;
            } else {
                jumlahBantuan.classList.remove('input-error');
                document.getElementById('jumlahBantuan-error').style.display = 'none';
            }
            
            // Validasi Tanggal Serah Terima
            const tanggalSerahTerima = document.getElementById('tanggalSerahTerima');
            if (!tanggalSerahTerima.value) {
                tanggalSerahTerima.classList.add('input-error');
                document.getElementById('tanggalSerahTerima-error').style.display = 'block';
                isValid = false;
            } else {
                tanggalSerahTerima.classList.remove('input-error');
                document.getElementById('tanggalSerahTerima-error').style.display = 'none';
            }
            
            // Validasi Status
            const status = document.getElementById('status');
            if (!status.value) {
                status.classList.add('input-error');
                document.getElementById('status-error').style.display = 'block';
                isValid = false;
            } else {
                status.classList.remove('input-error');
                document.getElementById('status-error').style.display = 'none';
            }
            
            return isValid;
        }
        
        // Fungsi untuk melihat data
        function viewData(id) {
            const data = dataBantuan.find(item => item.id === id);
            if (data) {
                alert(`Detail Data:\nNama KUB: ${data.namaKUB}\nNama: ${data.nama}\nNIK: ${data.nik}\nAlamat: ${data.alamat}, ${data.desa}, ${data.kecamatan}\nJenis Bantuan: ${data.jenisBantuan}\nJumlah: ${data.jumlahBantuan}\nStatus: ${data.status}`);
            }
        }
        
        // Fungsi untuk mengedit data
        function editData(id) {
            const data = dataBantuan.find(item => item.id === id);
            if (data) {
                // Isi form dengan data yang akan diedit
                document.getElementById('namaKUB').value = data.namaKUB;
                document.getElementById('tahunAnggaran').value = data.tahunAnggaran;
                document.getElementById('nik').value = data.nik;
                document.getElementById('nama').value = data.nama;
                document.getElementById('jabatan').value = data.jabatan;
                document.getElementById('whatsapp').value = data.whatsapp;
                document.getElementById('kecamatan').value = data.kecamatan;
                document.getElementById('desa').value = data.desa;
                document.getElementById('alamat').value = data.alamat;
                document.getElementById('jenisBantuan').value = data.jenisBantuan;
                document.getElementById('jumlahBantuan').value = data.jumlahBantuan;
                document.getElementById('tanggalSerahTerima').value = data.tanggalSerahTerima;
                document.getElementById('status').value = data.status;
                
                // Set atribut edit id
                document.getElementById('bantuanForm').setAttribute('data-edit-id', id);
                
                // Scroll ke form
                document.getElementById('bantuanForm').scrollIntoView({ behavior: 'smooth' });
                
                // Tampilkan notifikasi
                showToast('Data siap untuk diedit', 'info');
            }
        }
        
        // Fungsi untuk backup data
        function backupData() {
            const backupData = {
                dataBantuan: dataBantuan,
                backupDate: new Date().toISOString(),
                version: '2.1.0'
            };
            
            const dataStr = JSON.stringify(backupData);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `backup-barjas-${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('Backup data berhasil', 'success');
        }
        
        // Deteksi browser
        document.getElementById('browserInfo').textContent = navigator.userAgent;
    </script>
</body>
</html>
