<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APLIKASI BARJAS - Dinas Peternakan dan Perikanan Situbondo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary-color: #0d47a1;
            --secondary-color: #00695c;
            --accent-color: #ff8f00;
            --light-blue: #e3f2fd;
            --dark-blue: #082e5c;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--dark-blue));
            --gradient-secondary: linear-gradient(135deg, var(--secondary-color), #004d40);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #e65100);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 28px rgba(0,0,0,0.15);
        }
        
        body {
            background: linear-gradient(135deg, #f5f9ff 0%, #e8f5e9 100%);
            font-family: 'Poppins', 'Segoe UI', sans-serif;
            min-height: 100vh;
            padding: 10px 0;
            overflow-x: hidden;
        }
        
        .app-container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            box-shadow: var(--shadow-lg);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            z-index: 10;
        }
        
        .app-header {
            background: var(--gradient-primary);
            color: white;
            padding: 20px 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .app-header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            pointer-events: none;
        }
        
        .app-logo {
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .app-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }
        
        .app-subtitle {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 300;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        
        .nav-pills .nav-link {
            border-radius: 8px;
            margin-bottom: 8px;
            padding: 12px 15px;
            font-weight: 500;
            color: #444;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .nav-pills .nav-link:hover {
            background-color: #f0f7ff;
            transform: translateX(3px);
        }
        
        .nav-pills .nav-link.active {
            background: var(--gradient-primary);
            font-weight: 600;
            box-shadow: var(--shadow-md);
            transform: translateX(3px);
        }
        
        .section-title {
            border-left: 4px solid var(--primary-color);
            padding-left: 12px;
            margin: 20px 0;
            font-weight: 700;
            color: var(--dark-blue);
            font-size: 1.4rem;
            position: relative;
        }
        
        .section-title::after {
            content: "";
            position: absolute;
            bottom: -5px;
            left: 12px;
            width: 40px;
            height: 2px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-success {
            background: var(--gradient-secondary);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-warning {
            background: var(--gradient-accent);
            border: none;
            padding: 10px 20px;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .btn-warning:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .form-label {
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .form-label i {
            margin-right: 6px;
            color: var(--primary-color);
        }
        
        .form-control, .form-select {
            border-radius: 8px;
            padding: 12px 15px;
            border: 1px solid #ddd;
            transition: all 0.3s;
            box-shadow: var(--shadow-sm);
            font-size: 0.9rem;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.2);
            transform: translateY(-2px);
        }
        
        .copyright {
            text-align: center;
            padding: 20px;
            background-color: var(--light-blue);
            color: var(--dark-blue);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .data-table {
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            box-shadow: var(--shadow-sm);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .data-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 12px 10px;
            text-align: center;
            position: relative;
            font-size: 0.85rem;
        }
        
        .data-table th::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: rgba(255,255,255,0.3);
        }
        
        .data-table td {
            padding: 10px 8px;
            vertical-align: middle;
            border-bottom: 1px solid #eee;
            font-size: 0.85rem;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9fbff;
        }
        
        .data-table tr:hover {
            background-color: #edf5ff;
        }
        
        .feature-icon {
            font-size: 1.1rem;
            margin-right: 8px;
            width: 24px;
            text-align: center;
        }
        
        .password-modal .modal-content {
            border-radius: 12px;
            box-shadow: var(--shadow-lg);
            border: none;
        }
        
        .card {
            border-radius: 10px;
            border: none;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        
        .card-header {
            border-radius: 10px 10px 0 0 !important;
            font-weight: 600;
            padding: 15px 20px;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.95rem;
        }
        
        .stats-box {
            text-align: center;
            padding: 20px 15px;
            border-radius: 10px;
            background: white;
            box-shadow: var(--shadow-md);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .stats-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
        }
        
        .stats-box:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }
        
        .stats-number {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary-color);
            margin: 10px 0;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .stats-label {
            font-size: 0.9rem;
            color: #666;
            font-weight: 500;
        }
        
        .notification-toast toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1050;
            min-width: 280px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            max-width: calc(100vw - 40px);
        }
        
        .input-error {
            border-color: #dc3545;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.8rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }
        
        .watermark {
            position: absolute;
            bottom: 10px;
            right: 15px;
            opacity: 0.8;
            font-size: 0.8rem;
            color: white;
            font-weight: 300;
        }
        
        .control-panel {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: var(--shadow-sm);
        }
        
        .control-title {
            font-size: 1rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-blue);
        }
        
        .floating-action-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .floating-action-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }
        
        .filter-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
        }
        
        .badge-custom {
            background: var(--gradient-primary);
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 0.8rem;
        }
        
        .mobile-menu-btn {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1050;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            box-shadow: var(--shadow-lg);
        }
        
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1040;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 8px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--dark-blue);
        }
        
        /* Welcome notification styles - IMPROVED PREMIUM */
        .welcome-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, #0d47a1 0%, #082e5c 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 25px 80px rgba(0,0,0,0.4);
            z-index: 2000;
            text-align: center;
            width: 90%;
            max-width: 650px;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            overflow: hidden;
        }
        
        .welcome-notification::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 65%);
            pointer-events: none;
            animation: rotateGradient 15s linear infinite;
        }
        
        .welcome-notification.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .welcome-notification h3 {
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 2.2rem;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }
        
        .welcome-notification p {
            margin-bottom: 15px;
            font-size: 1.2rem;
            line-height: 1.6;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }
        
        .welcome-notification .icon {
            font-size: 4rem;
            margin-bottom: 25px;
            color: #ff8f00;
            text-shadow: 0 2px 12px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
            animation: pulse 2s infinite;
        }
        
        .welcome-notification .btn-close-welcome {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 3;
        }
        
        .welcome-notification .btn-close-welcome:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }
        
        .welcome-notification .highlight {
            color: #ff8f00;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        
        .welcome-notification .particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        @keyframes rotateGradient {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Particle Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
        }
        
        /* Responsive styles */
        @media (max-width: 1200px) {
            .app-title {
                font-size: 1.6rem;
            }
            
            .app-logo {
                font-size: 2.2rem;
            }
            
            .stats-number {
                font-size: 1.6rem;
            }
        }
        
        @media (max-width: 992px) {
            .app-title {
                font-size: 1.4rem;
            }
            
            .app-logo {
                font-size: 2rem;
            }
            
            .stats-number {
                font-size: 1.4rem;
            }
            
            .section-title {
                font-size: 1.2rem;
            }
            
            .col-md-3.col-lg-2.p-4.bg-light {
                position: fixed;
                top: 0;
                left: -300px;
                width: 280px;
                height: 100vh;
                z-index: 1050;
                overflow-y: auto;
                transition: left 0.3s ease;
                padding: 20px 15px !important;
            }
            
            .sidebar-open .col-md-3.col-lg-2.p-4.bg-light {
                left: 0;
            }
            
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .col-md-9.col-lg-10.p-5 {
                padding: 15px !important;
            }
        }
        
        @media (max-width: 768px) {
            .app-title {
                font-size: 1.3rem;
            }
            
            .app-logo {
                font-size: 1.8rem;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
            
            .stats-box {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .floating-action-btn {
                bottom: 15px;
                right: 15px;
                width: 45px;
                height: 45px;
            }
            
            .col-md-9.col-lg-10.p-5 {
                padding: 10px !important;
            }
            
            .app-header {
                padding: 15px 10px;
            }
            
            .data-table {
                font-size: 0.8rem;
            }
            
            .data-table th, .data-table td {
                padding: 8px 5px;
            }
            
            .btn-group .btn {
                padding: 8px 12px;
                font-size: 0.8rem;
            }
            
            .welcome-notification {
                padding: 25px 20px;
            }
            
            .welcome-notification h3 {
                font-size: 1.8rem;
            }
            
            .welcome-notification p {
                font-size: 1.1rem;
            }
            
            .welcome-notification .icon {
                font-size: 3.5rem;
            }
        }
        
        @media (max-width: 576px) {
            .app-title {
                font-size: 1.2rem;
            }
            
            .app-subtitle {
                font-size: 0.9rem;
            }
            
            .app-logo {
                font-size: 1.6rem;
            }
            
            .section-title {
                font-size: 1rem;
                margin: 15px 0;
            }
            
            .stats-number {
                font-size: 1.4rem;
            }
            
            .stats-label {
                font-size: 0.8rem;
            }
            
            .form-control, .form-select {
                padding: 10px 12px;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .filter-section .row > div {
                margin-bottom: 10px;
            }
            
            .d-flex.justify-content-between.align-items-center {
                flex-direction: column;
                align-items: flex-start !important;
            }
            
            .d-flex.justify-content-between.align-items-center .btn-group {
                margin-top: 10px;
                width: 100%;
            }
            
            .d-flex.justify-content-between.align-items-center .btn-group .btn {
                flex: 1;
            }
            
            .pagination {
                flex-wrap: wrap;
                margin-top: 10px;
            }
            
            .table-responsive {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .watermark {
                position: relative;
                text-align: center;
                margin-top: 10px;
                bottom: 0;
                right: 0;
            }
            
            .welcome-notification {
                padding: 20px 15px;
            }
            
            .welcome-notification h3 {
                font-size: 1.5rem;
            }
            
            .welcome-notification p {
                font-size: 1rem;
            }
            
            .welcome-notification .icon {
                font-size: 3rem;
            }
        }
        
        @media (max-width: 400px) {
            .app-title {
                font-size: 1.1rem;
            }
            
            .app-logo {
                font-size: 1.4rem;
            }
            
            .nav-pills .nav-link {
                padding: 10px 12px;
                font-size: 0.85rem;
            }
            
            .feature-icon {
                font-size: 1rem;
                margin-right: 6px;
                width: 20px;
            }
            
            .stats-box {
                padding: 12px 10px;
            }
            
            .stats-number {
                font-size: 1.2rem;
            }
            
            .card-header {
                padding: 12px 15px;
            }
            
            .welcome-notification h3 {
                font-size: 1.3rem;
            }
            
            .welcome-notification p {
                font-size: 0.9rem;
            }
            
            .welcome-notification .icon {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Particle Background -->
    <div id="particles-js"></div>

    <!-- Welcome Notification - IMPROVED PREMIUM -->
    <div class="welcome-notification" id="welcomeNotification">
        <button class="btn-close-welcome" id="closeWelcome">
            <i class="fas fa-times"></i>
        </button>
        <div class="particles-container" id="welcomeParticles"></div>
        <div class="icon">
            <i class="fas fa-hand-holding-water"></i>
        </div>
        <h3>Selamat Datang di APLIKASI BARJAS</h3>
        <p>Dinas Peternakan dan Perikanan Kabupaten Situbondo</p>
        <p>Terima kasih telah menggunakan aplikasi kami. Untuk keamanan data, harap mengganti password default dan lakukan backup data secara berkala.</p>
        <p><span class="highlight">Password default:</span> Dis******05</p>
        <p><small>Hubungi admin untuk bantuan lebih lanjut</small></p>
    </div>

    <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
    </button>
    
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="app-container">
        <div class="app-header">
            <div class="app-logo">
                <i class="fas fa-hand-holding-water"></i>
            </div>
            <h1 class="app-title">APLIKASI BARJAS</h1>
            <p class="app-subtitle">Dinas Peternakan dan Perikanan Situbondo</p>
            <div class="watermark">Lentera Karya Situbondo © 2025</div>
        </div>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-3 col-lg-2 p-4 bg-light">
                    <ul class="nav nav-pills flex-column" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="input-tab" data-bs-toggle="tab" href="#input" role="tab">
                                <i class="fas fa-pen feature-icon"></i>Input & Data
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="stats-tab" data-bs-toggle="tab" href="#stats" role="tab">
                                <i class="fas fa-chart-pie feature-icon"></i>Statistik
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="backup-tab" data-bs-toggle="tab" href="#backup" role="tab">
                                <i class="fas fa-cloud-download-alt feature-icon"></i>Backup & Restore
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="control-tab" data-bs-toggle="tab" href="#control" role="tab">
                                <i class="fas fa-cog feature-icon"></i>Kontrol Panel
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="about-tab" data-bs-toggle="tab" href="#about" role="tab">
                                <i class="fas fa-info-circle feature-icon"></i>Tentang
                            </a>
                        </li>
                    </ul>
                    
                    <div class="mt-4 p-3 bg-white rounded" style="box-shadow: var(--shadow-sm);">
                        <h6 class="text-center mb-3" style="color: var(--primary-color); font-weight: 600;">Total Data</h6>
                        <div class="d-flex justify-content-around">
                            <div class="text-center">
                                <div class="fw-bold fs-4 text-primary" id="total-data">0</div>
                                <div class="text-muted small">Data</div>
                            </div>
                            <div class="text-center">
                                <div class="fw-bold fs-4 text-primary" id="current-year">2025</div>
                                <div class="text-muted small">Tahun</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-panel">
                        <h6 class="control-title"><i class="fas fa-user-cog me-2"></i>Kontrol Cepat</h6>
                        <div class="d-grid gap-2">
                            <button class="btn btn-outline-primary btn-sm" id="quickBackupBtn">
                                <i class="fas fa-download me-2"></i>Backup Cepat
                            </button>
                            <button class="btn btn-outline-info btn-sm" id="refreshDataBtn">
                                <i class="fas fa-sync-alt me-2"></i>Refresh Data
                            </button>
                            <button class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#passwordModal">
                                <i class="fas fa-key me-2"></i>Ganti Password
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-9 col-lg-10 p-5">
                    <div class="tab-content" id="myTabContent">
                        <!-- Input Data Form dan Data Table -->
                        <div class="tab-pane fade show active" id="input" role="tabpanel">
                            <h3 class="section-title">Form Serah Terima Bantuan</h3>
                            <form id="bantuanForm" class="animate-fadeIn">
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="namaKUB" class="form-label"><i class="fas fa-users"></i>Nama KUB (Kelompok Usaha Bersama)</label>
                                        <input type="text" class="form-control" id="namaKUB" required oninput="this.value = this.value.toUpperCase()">
                                        <div class="error-message" id="namaKUB-error">Nama KUB harus diisi (minimal 3 karakter)</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="tahunAnggaran" class="form-label"><i class="fas fa-calendar-alt"></i>Tahun Anggaran</label>
                                        <select class="form-select" id="tahunAnggaran" required>
                                            <option value="" selected disabled>Pilih Tahun</option>
                                            <!-- Tahun akan diisi oleh JavaScript -->
                                        </select>
                                        <div class="error-message" id="tahunAnggaran-error">Tahun anggaran harus dipilih</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="nik" class="form-label"><i class="fas fa-id-card"></i>NIK (KTP) <span class="text-muted">(16 digit)</span></label>
                                        <input type="text" class="form-control" id="nik" required maxlength="16" pattern="[0-9]{16}" oninput="this.value = this.value.replace(/\D/g, '')">
                                        <div class="error-message" id="nik-error">NIK harus berupa angka (16 digit)</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="nama" class="form-label"><i class="fas fa-user"></i>Nama Lengkap</label>
                                        <input type="text" class="form-control" id="nama" required pattern="[A-Za-z\s]+" oninput="this.value = this.value.replace(/[^A-Za-z\s]/g, ''); this.value = this.value.toUpperCase()">
                                        <div class="error-message" id="nama-error">Nama harus diisi dan hanya boleh berisi huruf</div>
                                    </div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="jabatan" class="form-label"><i class="fas fa-briefcase"></i>Jabatan</label>
                                        <select class="form-select" id="jabatan" required>
                                            <option value="" selected disabled>Pilih Jabatan</option>
                                            <option value="Ketua Kelompok">Ketua Kelompok</option>
                                            <option value="Sekretaris">Sekretaris</option>
                                            <option value="Bendahara">Bendahara</option>
                                            <option value="Anggota">Anggota</option>
                                        </select>
                                        <div class="error-message" id="jabatan-error">Jabatan harus dipilih</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="whatsapp" class="form-label"><i class="fas fa-phone"></i>Nomor WhatsApp</label>
                                        <div class="input-group">
                                            <span class="input-group-text">+62</span>
                                            <input type="tel" class="form-control" id="whatsapp" required pattern="[0-9]{9,13}">
                                        </div>
                                        <div class="error-message" id="whatsapp-error">Nomor WhatsApp harus valid (9-13 digit)</div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="alamat" class="form-label"><i class="fas fa-map-marker-alt"></i>Alamat</label>
                                    <div class="mb-3">
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="alamatOption" id="alamatManual" value="manual" checked>
                                            <label class="form-check-label" for="alamatManual">Manual</label>
                                        </div>
                                        <div class="form-check form-check-inline">
                                            <input class="form-check-input" type="radio" name="alamatOption" id="alamatGPS" value="gps">
                                            <label class="form-check-label" for="alamatGPS">Gunakan GPS</label>
                                        </div>
                                    </div>
                                    <textarea class="form-control" id="alamat" rows="2" required></textarea>
                                    <div class="error-message" id="alamat-error">Alamat harus diisi (minimal 10 karakter)</div>
                                </div>
                                
                                <div class="row mb-4">
                                    <div class="col-md-6 mb-3 mb-md-0">
                                        <label for="jenisBantuan" class="form-label"><i class="fas fa-gift"></i>Jenis Bantuan</label>
                                        <select class="form-select" id="jenisBantuan" required>
                                            <option value="" selected disabled>Pilih Jenis Bantuan</option>
                                            <option value="Bantuan Bibit Ikan">Bantuan Bibit Ikan</option>
                                            <option value="Bantuan Pakan Ikan">Bantuan Pakan Ikan</option>
                                            <option value="Bantuan Peralatan">Bantuan Peralatan</option>
                                            <option value="Bantuan Bibit Ternak">Bantuan Bibit Ternak</option>
                                            <option value="Bantuan Pakan Ternak">Bantuan Pakan Ternak</option>
                                            <option value="Bantuan Kandang">Bantuan Kandang</option>
                                        </select>
                                        <div class="error-message" id="jenisBantuan-error">Jenis bantuan harus dipilih</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="jumlahBantuan" class="form-label"><i class="fas fa-calculator"></i>Jumlah Bantuan</label>
                                        <input type="number" class="form-control" id="jumlahBantuan" required min="1">
                                        <div class="error-message" id="jumlahBantuan-error">Jumlah bantuan harus diisi (minimal 1)</div>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="catatan" class="form-label"><i class="fas fa-sticky-note"></i>Catatan</label>
                                    <textarea class="form-control" id="catatan" rows="2"></textarea>
                                </div>
                                
                                <div class="d-flex justify-content-between">
                                    <button type="reset" class="btn btn-secondary">
                                        <i class="fas fa-undo me-2"></i>Reset Form
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save me-2"></i>Simpan Data
                                    </button>
                                </div>
                            </form>
                            
                            <hr class="my-5">
                            
                            <h3 class="section-title">Data Bantuan</h3>
                            
                            <div class="filter-section animate-fadeIn">
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="filterTahun" class="form-label"><i class="fas fa-filter"></i>Filter Berdasarkan Tahun</label>
                                        <select class="form-select" id="filterTahun">
                                            <option value="all">Semua Tahun</option>
                                            <!-- Tahun akan diisi oleh JavaScript -->
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="filterJenis" class="form-label"><i class="fas fa-filter"></i>Filter Berdasarkan Jenis</label>
                                        <select class="form-select" id="filterJenis">
                                            <option value="all">Semua Jenis</option>
                                            <option value="Bantuan Bibit Ikan">Bantuan Bibit Ikan</option>
                                            <option value="Bantuan Pakan Ikan">Bantuan Pakan Ikan</option>
                                            <option value="Bantuan Peralatan">Bantuan Peralatan</option>
                                            <option value="Bantuan Bibit Ternak">Bantuan Bibit Ternak</option>
                                            <option value="Bantuan Pakan Ternak">Bantuan Pakan Ternak</option>
                                            <option value="Bantuan Kandang">Bantuan Kandang</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="searchInput" class="form-label"><i class="fas fa-search"></i>Cari Data</label>
                                        <input type="text" class="form-control" id="searchInput" placeholder="Cari nama, KUB, atau alamat...">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div class="d-flex align-items-center">
                                    <span class="me-2">Tampilkan</span>
                                    <select class="form-select form-select-sm" id="entriesPerPage" style="width: 70px;">
                                        <option value="5">5</option>
                                        <option value="10" selected>10</option>
                                        <option value="25">25</option>
                                        <option value="50">50</option>
                                    </select>
                                    <span class="ms-2">entri</span>
                                </div>
                                <div class="btn-group">
                                    <button class="btn btn-outline-primary" id="exportPDFBtn">
                                        <i class="fas fa-file-pdf me-2"></i>Export PDF
                                    </button>
                                    <button class="btn btn-outline-success" id="exportExcelBtn">
                                        <i class="fas fa-file-excel me-2"></i>Export Excel
                                    </button>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover data-table" id="dataTable">
                                    <thead>
                                        <tr>
                                            <th>No</th>
                                            <th>KUB</th>
                                            <th>NIK</th>
                                            <th>Nama</th>
                                            <th>Jabatan</th>
                                            <th>WhatsApp</th>
                                            <th>Alamat</th>
                                            <th>Jenis Bantuan</th>
                                            <th>Jumlah</th>
                                            <th>Tahun</th>
                                            <th>Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Data akan diisi oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <div id="tableInfo">Menampilkan 0 dari 0 entri</div>
                                <nav>
                                    <ul class="pagination" id="pagination">
                                        <!-- Pagination akan diisi oleh JavaScript -->
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        
                        <!-- Statistik -->
                        <div class="tab-pane fade" id="stats" role="tabpanel">
                            <h3 class="section-title">Statistik Bantuan</h3>
                            
                            <div class="row mb-4">
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-users fa-2x text-primary mb-2"></i>
                                        <div class="stats-number" id="total-kub">0</div>
                                        <div class="stats-label">Total KUB</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-hand-holding-usd fa-2x text-success mb-2"></i>
                                        <div class="stats-number" id="total-bantuan">0</div>
                                        <div class="stats-label">Total Bantuan</div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="stats-box">
                                        <i class="fas fa-calendar-alt fa-2x text-warning mb-2"></i>
                                        <div class="stats-number" id="tahun-aktif">2025</div>
                                        <div class="stats-label">Tahun Aktif</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-bar me-2"></i>Statistik Bantuan per Tahun
                                        </div>
                                        <div class="card-body">
                                            <canvas id="tahunChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-chart-pie me-2"></i>Distribusi Jenis Bantuan
                                        </div>
                                        <div class="card-body">
                                            <canvas id="jenisChart" height="300"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-table me-2"></i>Rekapitulasi Data
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Tahun</th>
                                                    <th>Bibit Ikan</th>
                                                    <th>Pakan Ikan</th>
                                                    <th>Peralatan</th>
                                                    <th>Bibit Ternak</th>
                                                    <th>Pakan Ternak</th>
                                                    <th>Kandang</th>
                                                    <th>Total</th>
                                                </tr>
                                            </thead>
                                            <tbody id="rekapitulasiTable">
                                                <!-- Data rekapitulasi akan diisi oleh JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Backup & Restore -->
                        <div class="tab-pane fade" id="backup" role="tabpanel">
                            <h3 class="section-title">Backup & Restore Data</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <i class="fas fa-cloud-download-alt me-2"></i>Backup Data
                                        </div>
                                        <div class="card-body">
                                            <p>Lakukan backup data untuk mencegah kehilangan data. Data akan diunduh dalam format JSON.</p>
                                            <div class="mb-3">
                                                <label for="backupFileName" class="form-label">Nama File Backup</label>
                                                <input type="text" class="form-control" id="backupFileName" value="backup_barjas">
                                            </div>
                                            <div class="mb-3">
                                                <label for="backupPassword" class="form-label">Password (opsional)</label>
                                                <input type="password" class="form-control" id="backupPassword" placeholder="Masukkan password untuk mengenkripsi">
                                            </div>
                                            <button class="btn btn-primary w-100" id="backupBtn">
                                                <i class="fas fa-download me-2"></i>Backup Data Sekarang
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <i class="fas fa-cloud-upload-alt me-2"></i>Restore Data
                                        </div>
                                        <div class="card-body">
                                            <p>Restore data dari file backup. Pastikan file backup valid dan berasal dari aplikasi ini.</p>
                                            <div class="mb-3">
                                                <label for="restoreFile" class="form-label">Pilih File Backup</label>
                                                <input type="file" class="form-control" id="restoreFile" accept=".json">
                                            </div>
                                            <div class="mb-3">
                                                <label for="restorePassword" class="form-label">Password (jika dienkripsi)</label>
                                                <input type="password" class="form-control" id="restorePassword" placeholder="Masukkan password jika diperlukan">
                                            </div>
                                            <button class="btn btn-success w-100" id="restoreBtn">
                                                <i class="fas fa-upload me-2"></i>Restore Data
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-history me-2"></i>Riwayat Backup
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Tanggal</th>
                                                    <th>Nama File</th>
                                                    <th>Jumlah Data</th>
                                                    <th>Ukuran</th>
                                                    <th>Aksi</th>
                                                </tr>
                                            </thead>
                                            <tbody id="backupHistory">
                                                <!-- Riwayat backup akan diisi oleh JavaScript -->
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Kontrol Panel -->
                        <div class="tab-pane fade" id="control" role="tabpanel">
                            <h3 class="section-title">Kontrol Panel</h3>
                            
                            <div class="row">
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-database me-2"></i>Manajemen Data
                                        </div>
                                        <div class="card-body">
                                            <div class="d-grid gap-2">
                                                <button class="btn btn-outline-danger mb-2" data-bs-toggle="modal" data-bs-target="#clearDataModal">
                                                    <i class="fas fa-trash me-2"></i>Hapus Semua Data
                                                </button>
                                                <button class="btn btn-outline-warning mb-2" id="regenerateDataBtn">
                                                    <i class="fas fa-plus-circle me-2"></i>Generate Data Contoh
                                                </button>
                                                <button class="btn btn-outline-info" id="optimizeDataBtn">
                                                    <i class="fas fa-broom me-2"></i>Optimasi Penyimpanan
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-4">
                                    <div class="card">
                                        <div class="card-header">
                                            <i class="fas fa-user-shield me-2"></i>Keamanan
                                        </div>
                                        <div class="card-body">
                                            <div class="mb-3">
                                                <label for="autoBackup" class="form-label">Auto Backup Setiap (hari)</label>
                                                <select class="form-select" id="autoBackup">
                                                    <option value="0">Tidak</option>
                                                    <option value="1">1 Hari</option>
                                                    <option value="7" selected>7 Hari</option>
                                                    <option value="30">30 Hari</option>
                                                </select>
                                            </div>
                                            <div class="form-check form-switch mb-3">
                                                <input class="form-check-input" type="checkbox" id="passwordProtection" checked>
                                                <label class="form-check-label" for="passwordProtection">Aktifkan Perlindungan Password</label>
                                            </div>
                                            <div class="d-grid">
                                                <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#passwordModal">
                                                    <i class="fas fa-key me-2"></i>Ganti Password
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-info-circle me-2"></i>Informasi Sistem
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <strong>Versi Aplikasi:</strong> 2.1.0
                                            </div>
                                            <div class="mb-3">
                                                <strong>Tanggal Install:</strong> <span id="installDate">15 Agustus 2025</span>
                                            </div>
                                            <div class="mb-3">
                                                <strong>Browser:</strong> <span id="browserInfo">Chrome 105</span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="mb-3">
                                                <strong>Total Data:</strong> <span id="systemTotalData">0</span> entri
                                            </div>
                                            <div class="mb-3">
                                                <strong>Penyimpanan Digunakan:</strong> <span id="storageUsed">0 KB</span>
                                            </div>
                                            <div class="mb-3">
                                                <strong>Status:</strong> <span class="badge bg-success" id="systemStatus">Aktif</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-tools me-2"></i>Pemeliharaan
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <button class="btn btn-outline-secondary w-100 mb-2" id="clearCacheBtn">
                                                <i class="fas fa-broom me-2"></i>Bersihkan Cache
                                            </button>
                                            <small class="text-muted">Membersihkan cache aplikasi untuk meningkatkan kinerja</small>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <button class="btn btn-outline-info w-100 mb-2" id="checkUpdateBtn">
                                                <i class="fas fa-sync-alt me-2"></i>Periksa Pembaruan
                                            </button>
                                            <small class="text-muted">Memeriksa ketersediaan versi terbaru aplikasi</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tentang -->
                        <div class="tab-pane fade" id="about" role="tabpanel">
                            <h3 class="section-title">Tentang Aplikasi</h3>
                            
                            <div class="card mb-4">
                                <div class="card-body text-center">
                                    <div class="app-logo mb-3" style="font-size: 4rem;">
                                        <i class="fas fa-hand-holding-water"></i>
                                    </div>
                                    <h2>APLIKASI BARJAS</h2>
                                    <p class="lead">Bantuan dan Pendistribusian Barang</p>
                                    <p>Versi 2.1.0</p>
                                </div>
                            </div>
                            
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <i class="fas fa-info-circle me-2"></i>Informasi
                                        </div>
                                        <div class="card-body">
                                            <p>Aplikasi BARJAS dikembangkan untuk Dinas Peternakan dan Perikanan Kabupaten Situbondo guna memudahkan proses pendataan dan pendistribusian bantuan kepada masyarakat.</p>
                                            <p><strong>Fitur Utama:</strong></p>
                                            <ul>
                                                <li>Input data penerima bantuan</li>
                                                <li>Manajemen data KUB</li>
                                                <li>Statistik dan laporan</li>
                                                <li>Backup dan restore data</li>
                                                <li>Ekspor data ke PDF dan Excel</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card h-100">
                                        <div class="card-header">
                                            <i class="fas fa-code me-2"></i>Pengembangan
                                        </div>
                                        <div class="card-body">
                                            <p><strong>Dikembangkan oleh:</strong> Lentera Karya Situbondo</p>
                                            <p><strong>Teknologi:</strong> HTML5, CSS3, JavaScript, Bootstrap 5, Chart.js</p>
                                            <p><strong>Penyimpanan:</strong> LocalStorage (Browser)</p>
                                            <p><strong>Lisensi:</strong> MIT License</p>
                                            <p><strong>Kontak:</strong> info@lenterakarya.id</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-history me-2"></i>Riwayat Versi
                                </div>
                                <div class="card-body">
                                    <div class="accordion" id="versionHistory">
                                        <div class="accordion-item">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#v2-1-0">
                                                    Versi 2.1.0 (Agustus 2025)
                                                </button>
                                            </h2>
                                            <div id="v2-1-0" class="accordion-collapse collapse show" data-bs-parent="#versionHistory">
                                                <div class="accordion-body">
                                                    <ul>
                                                        <li>Perbaikan bug pada fitur hapus data</li>
                                                        <li>Peningkatan keamanan data</li>
                                                        <li>Optimasi performa aplikasi</li>
                                                        <li>UI/UX improvements</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#v2-0-0">
                                                    Versi 2.0.0 (Juli 2025)
                                                </button>
                                            </h2>
                                            <div id="v2-0-0" class="accordion-collapse collapse" data-bs-parent="#versionHistory">
                                                <div class="accordion-body">
                                                    <ul>
                                                        <li>Rilis versi utama dengan fitur lengkap</li>
                                                        <li>Penambahan modul backup dan restore</li>
                                                        <li>Penambahan statistik dan chart</li>
                                                        <li>Ekspor data ke PDF dan Excel</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="accordion-item">
                                            <h2 class="accordion-header">
                                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#v1-0-0">
                                                    Versi 1.0.0 (Juni 2025)
                                                </button>
                                            </h2>
                                            <div id="v1-0-0" class="accordion-collapse collapse" data-bs-parent="#versionHistory">
                                                <div class="accordion-body">
                                                    <ul>
                                                        <li>Rilis awal aplikasi</li>
                                                        <li>Fitur input data dasar</li>
                                                        <li>Manajemen data sederhana</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2025 Dinas Peternakan dan Perikanan Kabupaten Situbondo. <br class="d-sm-none"> 
            <span class="d-none d-sm-inline"> | </span> 
            Dikembangkan oleh <strong>Lentera Karya Situbondo</strong>
        </div>
    </div>
    
    <!-- Floating Action Button -->
    <div class="floating-action-btn" data-bs-toggle="modal" data-bs-target="#quickInputModal">
        <i class="fas fa-plus"></i>
    </div>
    
    <!-- Modal Ganti Password -->
    <div class="modal fade" id="passwordModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-key me-2"></i>Ganti Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="currentPassword" class="form-label">Password Saat Ini</label>
                        <input type="password" class="form-control" id="currentPassword">
                    </div>
                    <div class="mb-3">
                        <label for="newPassword" class="form-label">Password Baru</label>
                        <input type="password" class="form-control" id="newPassword">
                    </div>
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Konfirmasi Password Baru</label>
                        <input type="password" class="form-control" id="confirmPassword">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="savePasswordBtn">Simpan Password</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Hapus Data -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-trash-alt me-2"></i>Hapus Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus data ini? Tindakan ini tidak dapat dibatalkan.</p>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>Data yang dihapus tidak dapat dikembalikan.
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Hapus Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Hapus Semua Data -->
    <div class="modal fade" id="clearDataModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-trash me-2"></i>Hapus Semua Data</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Apakah Anda yakin ingin menghapus semua data? Tindakan ini tidak dapat dibatalkan.</p>
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-circle me-2"></i>Semua data akan dihapus permanen. Pastikan Anda telah melakukan backup data.
                    </div>
                    <div class="mb-3">
                        <label for="clearDataPassword" class="form-label">Masukkan Password untuk Konfirmasi</label>
                        <input type="password" class="form-control" id="clearDataPassword">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-danger" id="confirmClearDataBtn">Hapus Semua Data</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Quick Input -->
    <div class="modal fade" id="quickInputModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="fas fa-bolt me-2"></i>Input Cepat</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="quickNamaKUB" class="form-label">Nama KUB</label>
                        <input type="text" class="form-control" id="quickNamaKUB">
                    </div>
                    <div class="mb-3">
                        <label for="quickNama" class="form-label">Nama Lengkap</label>
                        <input type="text" class="form-control" id="quickNama">
                    </div>
                    <div class="mb-3">
                        <label for="quickJenisBantuan" class="form-label">Jenis Bantuan</label>
                        <select class="form-select" id="quickJenisBantuan">
                            <option value="Bantuan Bibit Ikan">Bantuan Bibit Ikan</option>
                            <option value="Bantuan Pakan Ikan">Bantuan Pakan Ikan</option>
                            <option value="Bantuan Peralatan">Bantuan Peralatan</option>
                            <option value="Bantuan Bibit Ternak">Bantuan Bibit Ternak</option>
                            <option value="Bantuan Pakan Ternak">Bantuan Pakan Ternak</option>
                            <option value="Bantuan Kandang">Bantuan Kandang</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveQuickInputBtn">Simpan</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Notifications -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="successToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-success text-white">
                <i class="fas fa-check-circle me-2"></i>
                <strong class="me-auto">Sukses</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Operasi berhasil dilakukan.
            </div>
        </div>
        
        <div id="errorToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header bg-danger text-white">
                <i class="fas fa-exclamation-circle me-2"></i>
                <strong class="me-auto">Error</strong>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Terjadi kesalahan. Silakan coba lagi.
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    
    <script>
        // Inisialisasi aplikasi
        document.addEventListener('DOMContentLoaded', function() {
            // Inisialisasi partikel background
            particlesJS('particles-js', {
                particles: {
                    number: { value: 80, density: { enable: true, value_area: 800 } },
                    color: { value: "#0d47a1" },
                    shape: { type: "circle" },
                    opacity: { value: 0.5, random: true },
                    size: { value: 3, random: true },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#0d47a1",
                        opacity: 0.4,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: 2,
                        direction: "none",
                        random: true,
                        straight: false,
                        out_mode: "out",
                        bounce: false
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: { enable: true, mode: "grab" },
                        onclick: { enable: true, mode: "push" },
                        resize: true
                    }
                },
                retina_detect: true
            });
            
            // Tampilkan welcome notification
            setTimeout(function() {
                document.getElementById('welcomeNotification').classList.add('show');
            }, 1000);
            
            // Inisialisasi data
            initApp();
            
            // Setup event listeners
            setupEventListeners();
        });
        
        // Fungsi untuk inisialisasi aplikasi
        function initApp() {
            // Inisialisasi tahun untuk dropdown
            initYearDropdowns();
            
            // Muat data dari localStorage
            loadData();
            
            // Update statistik
            updateStats();
            
            // Update informasi sistem
            updateSystemInfo();
            
            // Setup chart
            setupCharts();
        }
        
        // Inisialisasi dropdown tahun
        function initYearDropdowns() {
            const currentYear = new Date().getFullYear();
            const startYear = 2020;
            const tahunAnggaran = document.getElementById('tahunAnggaran');
            const filterTahun = document.getElementById('filterTahun');
            
            // Set tahun saat ini
            document.getElementById('current-year').textContent = currentYear;
            
            // Isi dropdown tahun
            for (let year = currentYear; year >= startYear; year--) {
                const option1 = document.createElement('option');
                option1.value = year;
                option1.textContent = year;
                
                const option2 = document.createElement('option');
                option2.value = year;
                option2.textContent = year;
                
                tahunAnggaran.appendChild(option1);
                filterTahun.appendChild(option2);
            }
            
            // Set tahun saat ini sebagai pilihan default
            tahunAnggaran.value = currentYear;
        }
        
        // Muat data dari localStorage
        function loadData() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            renderDataTable(data);
            updateTotalData(data.length);
        }
        
        // Render data ke tabel
        function renderDataTable(data) {
            const tableBody = document.querySelector('#dataTable tbody');
            tableBody.innerHTML = '';
            
            if (data.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="11" class="text-center py-4">
                        <i class="fas fa-database fs-1 d-block text-muted mb-2"></i>
                        <span class="text-muted">Tidak ada data yang tersimpan</span>
                    </td>
                `;
                tableBody.appendChild(row);
                updateTableInfo(0, 0, 0);
                return;
            }
            
            // Filter data berdasarkan tahun dan jenis
            const filterTahun = document.getElementById('filterTahun').value;
            const filterJenis = document.getElementById('filterJenis').value;
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            
            let filteredData = data;
            
            if (filterTahun !== 'all') {
                filteredData = filteredData.filter(item => item.tahunAnggaran == filterTahun);
            }
            
            if (filterJenis !== 'all') {
                filteredData = filteredData.filter(item => item.jenisBantuan === filterJenis);
            }
            
            if (searchInput) {
                filteredData = filteredData.filter(item => 
                    item.namaKUB.toLowerCase().includes(searchInput) || 
                    item.nama.toLowerCase().includes(searchInput) || 
                    item.alamat.toLowerCase().includes(searchInput)
                );
            }
            
            // Pagination
            const entriesPerPage = parseInt(document.getElementById('entriesPerPage').value);
            const currentPage = 1; // Reset ke halaman pertama saat filter berubah
            const totalPages = Math.ceil(filteredData.length / entriesPerPage);
            const startIndex = (currentPage - 1) * entriesPerPage;
            const endIndex = Math.min(startIndex + entriesPerPage, filteredData.length);
            const paginatedData = filteredData.slice(startIndex, endIndex);
            
            // Render data
            paginatedData.forEach((item, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="text-center">${startIndex + index + 1}</td>
                    <td>${item.namaKUB}</td>
                    <td>${item.nik}</td>
                    <td>${item.nama}</td>
                    <td>${item.jabatan}</td>
                    <td>+62${item.whatsapp}</td>
                    <td>${item.alamat}</td>
                    <td>${item.jenisBantuan}</td>
                    <td class="text-center">${item.jumlahBantuan}</td>
                    <td class="text-center">${item.tahunAnggaran}</td>
                    <td class="text-center">
                        <div class="btn-group btn-group-sm">
                            <button class="btn btn-outline-primary" data-bs-toggle="tooltip" title="Edit" onclick="editData(${item.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-outline-danger" data-bs-toggle="tooltip" title="Hapus" onclick="showDeleteModal(${item.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
            
            // Update info tabel dan pagination
            updateTableInfo(filteredData.length, startIndex + 1, endIndex);
            setupPagination(filteredData.length, currentPage, entriesPerPage);
        }
        
        // Update info tabel
        function updateTableInfo(total, start, end) {
            document.getElementById('tableInfo').textContent = `Menampilkan ${start} sampai ${end} dari ${total} entri`;
        }
        
        // Setup pagination
        function setupPagination(totalItems, currentPage, itemsPerPage) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            const paginationElement = document.getElementById('pagination');
            paginationElement.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Tombol Previous
            const prevLi = document.createElement('li');
            prevLi.classList.add('page-item', currentPage === 1 ? 'disabled' : '');
            prevLi.innerHTML = `<a class="page-link" href="#" data-page="${currentPage - 1}">Previous</a>`;
            paginationElement.appendChild(prevLi);
            
            // Halaman
            for (let i = 1; i <= totalPages; i++) {
                const pageLi = document.createElement('li');
                pageLi.classList.add('page-item', i === currentPage ? 'active' : '');
                pageLi.innerHTML = `<a class="page-link" href="#" data-page="${i}">${i}</a>`;
                paginationElement.appendChild(pageLi);
            }
            
            // Tombol Next
            const nextLi = document.createElement('li');
            nextLi.classList.add('page-item', currentPage === totalPages ? 'disabled' : '');
            nextLi.innerHTML = `<a class="page-link" href="#" data-page="${currentPage + 1}">Next</a>`;
            paginationElement.appendChild(nextLi);
            
            // Event listeners untuk pagination
            paginationElement.querySelectorAll('.page-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = parseInt(this.getAttribute('data-page'));
                    if (!isNaN(page)) {
                        // Implementasi pagination di sini
                        // (kode untuk pagination data)
                    }
                });
            });
        }
        
        // Update total data
        function updateTotalData(count) {
            document.getElementById('total-data').textContent = count;
            document.getElementById('systemTotalData').textContent = count;
        }
        
        // Update statistik
        function updateStats() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            
            // Hitung total KUB (unik)
            const kubSet = new Set(data.map(item => item.namaKUB));
            document.getElementById('total-kub').textContent = kubSet.size;
            
            // Hitung total bantuan
            const totalBantuan = data.reduce((sum, item) => sum + parseInt(item.jumlahBantuan), 0);
            document.getElementById('total-bantuan').textContent = totalBantuan.toLocaleString();
            
            // Tahun aktif (tahun terbaru dengan data)
            const years = [...new Set(data.map(item => item.tahunAnggaran))].sort((a, b) => b - a);
            document.getElementById('tahun-aktif').textContent = years.length > 0 ? years[0] : new Date().getFullYear();
        }
        
        // Update informasi sistem
        function updateSystemInfo() {
            // Simulasi informasi browser
            const userAgent = navigator.userAgent;
            let browserInfo = "Browser tidak dikenali";
            
            if (userAgent.indexOf("Chrome") > -1) {
                browserInfo = "Chrome";
            } else if (userAgent.indexOf("Firefox") > -1) {
                browserInfo = "Firefox";
            } else if (userAgent.indexOf("Safari") > -1) {
                browserInfo = "Safari";
            } else if (userAgent.indexOf("Edge") > -1) {
                browserInfo = "Edge";
            }
            
            document.getElementById('browserInfo').textContent = browserInfo;
            
            // Hitung penggunaan penyimpanan
            const data = localStorage.getItem('barjasData') || '';
            const backupHistory = localStorage.getItem('backupHistory') || '';
            const settings = localStorage.getItem('appSettings') || '';
            
            const totalSize = new Blob([data, backupHistory, settings]).size;
            document.getElementById('storageUsed').textContent = `${(totalSize / 1024).toFixed(2)} KB`;
        }
        
        // Setup chart
        function setupCharts() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            
            // Chart distribusi per tahun
            const tahunCtx = document.getElementById('tahunChart').getContext('2d');
            const tahunData = {};
            
            data.forEach(item => {
                if (tahunData[item.tahunAnggaran]) {
                    tahunData[item.tahunAnggaran] += parseInt(item.jumlahBantuan);
                } else {
                    tahunData[item.tahunAnggaran] = parseInt(item.jumlahBantuan);
                }
            });
            
            const tahunLabels = Object.keys(tahunData).sort();
            const tahunValues = tahunLabels.map(year => tahunData[year]);
            
            new Chart(tahunCtx, {
                type: 'bar',
                data: {
                    labels: tahunLabels,
                    datasets: [{
                        label: 'Jumlah Bantuan per Tahun',
                        data: tahunValues,
                        backgroundColor: 'rgba(13, 71, 161, 0.7)',
                        borderColor: 'rgba(13, 71, 161, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Chart distribusi jenis bantuan
            const jenisCtx = document.getElementById('jenisChart').getContext('2d');
            const jenisData = {};
            
            data.forEach(item => {
                if (jenisData[item.jenisBantuan]) {
                    jenisData[item.jenisBantuan] += parseInt(item.jumlahBantuan);
                } else {
                    jenisData[item.jenisBantuan] = parseInt(item.jumlahBantuan);
                }
            });
            
            const jenisLabels = Object.keys(jenisData);
            const jenisValues = jenisLabels.map(jenis => jenisData[jenis]);
            
            new Chart(jenisCtx, {
                type: 'pie',
                data: {
                    labels: jenisLabels,
                    datasets: [{
                        data: jenisValues,
                        backgroundColor: [
                            'rgba(13, 71, 161, 0.7)',
                            'rgba(0, 105, 92, 0.7)',
                            'rgba(255, 143, 0, 0.7)',
                            'rgba(156, 39, 176, 0.7)',
                            'rgba(233, 30, 99, 0.7)',
                            'rgba(63, 81, 181, 0.7)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // Update rekapitulasi table
            updateRekapitulasiTable(data);
        }
        
        // Update tabel rekapitulasi
        function updateRekapitulasiTable(data) {
            const rekapitulasiTable = document.getElementById('rekapitulasiTable');
            rekapitulasiTable.innerHTML = '';
            
            const years = [...new Set(data.map(item => item.tahunAnggaran))].sort((a, b) => b - a);
            const jenisBantuan = [
                'Bantuan Bibit Ikan',
                'Bantuan Pakan Ikan',
                'Bantuan Peralatan',
                'Bantuan Bibit Ternak',
                'Bantuan Pakan Ternak',
                'Bantuan Kandang'
            ];
            
            years.forEach(year => {
                const row = document.createElement('tr');
                let rowContent = `<td>${year}</td>`;
                let totalTahun = 0;
                
                jenisBantuan.forEach(jenis => {
                    const total = data
                        .filter(item => item.tahunAnggaran == year && item.jenisBantuan === jenis)
                        .reduce((sum, item) => sum + parseInt(item.jumlahBantuan), 0);
                    
                    rowContent += `<td>${total.toLocaleString()}</td>`;
                    totalTahun += total;
                });
                
                rowContent += `<td><strong>${totalTahun.toLocaleString()}</strong></td>`;
                row.innerHTML = rowContent;
                rekapitulasiTable.appendChild(row);
            });
            
            // Total row
            if (years.length > 1) {
                const totalRow = document.createElement('tr');
                totalRow.classList.add('table-primary');
                let totalContent = '<td><strong>Total</strong></td>';
                let grandTotal = 0;
                
                jenisBantuan.forEach(jenis => {
                    const total = data
                        .filter(item => item.jenisBantuan === jenis)
                        .reduce((sum, item) => sum + parseInt(item.jumlahBantuan), 0);
                    
                    totalContent += `<td><strong>${total.toLocaleString()}</strong></td>`;
                    grandTotal += total;
                });
                
                totalContent += `<td><strong>${grandTotal.toLocaleString()}</strong></td>`;
                totalRow.innerHTML = totalContent;
                rekapitulasiTable.appendChild(totalRow);
            }
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Form submission
            document.getElementById('bantuanForm').addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateForm()) {
                    saveData();
                }
            });
            
            // Filter events
            document.getElementById('filterTahun').addEventListener('change', function() {
                loadData();
            });
            
            document.getElementById('filterJenis').addEventListener('change', function() {
                loadData();
            });
            
            document.getElementById('searchInput').addEventListener('input', function() {
                loadData();
            });
            
            document.getElementById('entriesPerPage').addEventListener('change', function() {
                loadData();
            });
            
            // Export buttons
            document.getElementById('exportPDFBtn').addEventListener('click', function() {
                exportToPDF();
            });
            
            document.getElementById('exportExcelBtn').addEventListener('click', function() {
                exportToExcel();
            });
            
            // Backup buttons
            document.getElementById('backupBtn').addEventListener('click', function() {
                backupData();
            });
            
            document.getElementById('restoreBtn').addEventListener('click', function() {
                restoreData();
            });
            
            // Control panel buttons
            document.getElementById('clearCacheBtn').addEventListener('click', function() {
                clearCache();
            });
            
            document.getElementById('checkUpdateBtn').addEventListener('click', function() {
                checkForUpdates();
            });
            
            document.getElementById('regenerateDataBtn').addEventListener('click', function() {
                generateSampleData();
            });
            
            document.getElementById('optimizeDataBtn').addEventListener('click', function() {
                optimizeStorage();
            });
            
            // Mobile menu
            document.getElementById('mobileMenuBtn').addEventListener('click', function() {
                document.body.classList.toggle('sidebar-open');
                document.getElementById('sidebarOverlay').classList.toggle('active');
            });
            
            document.getElementById('sidebarOverlay').addEventListener('click', function() {
                document.body.classList.remove('sidebar-open');
                this.classList.remove('active');
            });
            
            // Close welcome notification
            document.getElementById('closeWelcome').addEventListener('click', function() {
                document.getElementById('welcomeNotification').classList.remove('show');
            });
            
            // Konfirmasi hapus data
            document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
                const id = this.getAttribute('data-id');
                deleteData(id);
            });
            
            // Konfirmasi hapus semua data
            document.getElementById('confirmClearDataBtn').addEventListener('click', function() {
                clearAllData();
            });
        }
        
        // Validasi form
        function validateForm() {
            let isValid = true;
            
            // Validasi Nama KUB
            const namaKUB = document.getElementById('namaKUB');
            const namaKUBError = document.getElementById('namaKUB-error');
            if (!namaKUB.value || namaKUB.value.length < 3) {
                namaKUB.classList.add('input-error');
                namaKUBError.style.display = 'block';
                isValid = false;
            } else {
                namaKUB.classList.remove('input-error');
                namaKUBError.style.display = 'none';
            }
            
            // Validasi Tahun Anggaran
            const tahunAnggaran = document.getElementById('tahunAnggaran');
            const tahunAnggaranError = document.getElementById('tahunAnggaran-error');
            if (!tahunAnggaran.value) {
                tahunAnggaran.classList.add('input-error');
                tahunAnggaranError.style.display = 'block';
                isValid = false;
            } else {
                tahunAnggaran.classList.remove('input-error');
                tahunAnggaranError.style.display = 'none';
            }
            
            // Validasi NIK
            const nik = document.getElementById('nik');
            const nikError = document.getElementById('nik-error');
            if (!nik.value || nik.value.length !== 16 || !/^\d+$/.test(nik.value)) {
                nik.classList.add('input-error');
                nikError.style.display = 'block';
                isValid = false;
            } else {
                nik.classList.remove('input-error');
                nikError.style.display = 'none';
            }
            
            // Validasi Nama
            const nama = document.getElementById('nama');
            const namaError = document.getElementById('nama-error');
            if (!nama.value || !/^[A-Za-z\s]+$/.test(nama.value)) {
                nama.classList.add('input-error');
                namaError.style.display = 'block';
                isValid = false;
            } else {
                nama.classList.remove('input-error');
                namaError.style.display = 'none';
            }
            
            // Validasi Jabatan
            const jabatan = document.getElementById('jabatan');
            const jabatanError = document.getElementById('jabatan-error');
            if (!jabatan.value) {
                jabatan.classList.add('input-error');
                jabatanError.style.display = 'block';
                isValid = false;
            } else {
                jabatan.classList.remove('input-error');
                jabatanError.style.display = 'none';
            }
            
            // Validasi WhatsApp
            const whatsapp = document.getElementById('whatsapp');
            const whatsappError = document.getElementById('whatsapp-error');
            if (!whatsapp.value || whatsapp.value.length < 9 || whatsapp.value.length > 13 || !/^\d+$/.test(whatsapp.value)) {
                whatsapp.classList.add('input-error');
                whatsappError.style.display = 'block';
                isValid = false;
            } else {
                whatsapp.classList.remove('input-error');
                whatsappError.style.display = 'none';
            }
            
            // Validasi Alamat
            const alamat = document.getElementById('alamat');
            const alamatError = document.getElementById('alamat-error');
            if (!alamat.value || alamat.value.length < 10) {
                alamat.classList.add('input-error');
                alamatError.style.display = 'block';
                isValid = false;
            } else {
                alamat.classList.remove('input-error');
                alamatError.style.display = 'none';
            }
            
            // Validasi Jenis Bantuan
            const jenisBantuan = document.getElementById('jenisBantuan');
            const jenisBantuanError = document.getElementById('jenisBantuan-error');
            if (!jenisBantuan.value) {
                jenisBantuan.classList.add('input-error');
                jenisBantuanError.style.display = 'block';
                isValid = false;
            } else {
                jenisBantuan.classList.remove('input-error');
                jenisBantuanError.style.display = 'none';
            }
            
            // Validasi Jumlah Bantuan
            const jumlahBantuan = document.getElementById('jumlahBantuan');
            const jumlahBantuanError = document.getElementById('jumlahBantuan-error');
            if (!jumlahBantuan.value || parseInt(jumlahBantuan.value) < 1) {
                jumlahBantuan.classList.add('input-error');
                jumlahBantuanError.style.display = 'block';
                isValid = false;
            } else {
                jumlahBantuan.classList.remove('input-error');
                jumlahBantuanError.style.display = 'none';
            }
            
            return isValid;
        }
        
        // Simpan data
        function saveData() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            const newId = data.length > 0 ? Math.max(...data.map(item => item.id)) + 1 : 1;
            
            const newData = {
                id: newId,
                namaKUB: document.getElementById('namaKUB').value,
                tahunAnggaran: document.getElementById('tahunAnggaran').value,
                nik: document.getElementById('nik').value,
                nama: document.getElementById('nama').value,
                jabatan: document.getElementById('jabatan').value,
                whatsapp: document.getElementById('whatsapp').value,
                alamat: document.getElementById('alamat').value,
                jenisBantuan: document.getElementById('jenisBantuan').value,
                jumlahBantuan: document.getElementById('jumlahBantuan').value,
                catatan: document.getElementById('catatan').value,
                tanggalInput: new Date().toISOString()
            };
            
            data.push(newData);
            localStorage.setItem('barjasData', JSON.stringify(data));
            
            // Reset form
            document.getElementById('bantuanForm').reset();
            
            // Reload data
            loadData();
            updateStats();
            setupCharts();
            
            // Tampilkan notifikasi sukses
            showToast('success', 'Data berhasil disimpan!');
        }
        
        // Edit data
        function editData(id) {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            const item = data.find(item => item.id === id);
            
            if (item) {
                document.getElementById('namaKUB').value = item.namaKUB;
                document.getElementById('tahunAnggaran').value = item.tahunAnggaran;
                document.getElementById('nik').value = item.nik;
                document.getElementById('nama').value = item.nama;
                document.getElementById('jabatan').value = item.jabatan;
                document.getElementById('whatsapp').value = item.whatsapp;
                document.getElementById('alamat').value = item.alamat;
                document.getElementById('jenisBantuan').value = item.jenisBantuan;
                document.getElementById('jumlahBantuan').value = item.jumlahBantuan;
                document.getElementById('catatan').value = item.catatan || '';
                
                // Hapus data lama
                deleteData(id, false);
                
                // Scroll ke form
                document.getElementById('input').scrollIntoView({ behavior: 'smooth' });
                
                showToast('info', 'Data siap untuk diedit. Silakan perbarui dan simpan.');
            }
        }
        
        // Tampilkan modal hapus
        function showDeleteModal(id) {
            // Set data-id pada tombol konfirmasi
            document.getElementById('confirmDeleteBtn').setAttribute('data-id', id);
            
            // Tampilkan modal
            const deleteModal = new bootstrap.Modal(document.getElementById('deleteModal'));
            deleteModal.show();
        }
        
        // Hapus data
        function deleteData(id, showNotification = true) {
            let data = JSON.parse(localStorage.getItem('barjasData')) || [];
            data = data.filter(item => item.id !== id);
            localStorage.setItem('barjasData', JSON.stringify(data));
            
            // Reload data
            loadData();
            updateStats();
            setupCharts();
            
            // Tutup modal
            const deleteModal = bootstrap.Modal.getInstance(document.getElementById('deleteModal'));
            deleteModal.hide();
            
            // Tampilkan notifikasi
            if (showNotification) {
                showToast('success', 'Data berhasil dihapus!');
            }
        }
        
        // Hapus semua data
        function clearAllData() {
            const password = document.getElementById('clearDataPassword').value;
            
            // Validasi password (contoh: password default adalah "Disnakkan05")
            if (password === "Disnakkan05") {
                localStorage.removeItem('barjasData');
                
                // Reload data
                loadData();
                updateStats();
                setupCharts();
                
                // Tutup modal
                const clearDataModal = bootstrap.Modal.getInstance(document.getElementById('clearDataModal'));
                clearDataModal.hide();
                
                // Reset form password
                document.getElementById('clearDataPassword').value = '';
                
                showToast('success', 'Semua data berhasil dihapus!');
            } else {
                showToast('error', 'Password salah! Data tidak dihapus.');
            }
        }
        
        // Backup data
        function backupData() {
            const data = localStorage.getItem('barjasData');
            const fileName = document.getElementById('backupFileName').value || 'backup_barjas';
            const password = document.getElementById('backupPassword').value;
            
            if (!data) {
                showToast('error', 'Tidak ada data untuk dibackup!');
                return;
            }
            
            let backupData = data;
            
            // Enkripsi data jika password diberikan
            if (password) {
                // Implementasi enkripsi sederhana (dalam aplikasi nyata gunakan library enkripsi yang lebih aman)
                backupData = btoa(backupData);
            }
            
            const blob = new Blob([backupData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `${fileName}_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Simpan ke riwayat backup
            saveBackupHistory(fileName, JSON.parse(data).length);
            
            showToast('success', 'Backup data berhasil!');
        }
        
        // Restore data
        function restoreData() {
            const fileInput = document.getElementById('restoreFile');
            const password = document.getElementById('restorePassword').value;
            
            if (!fileInput.files.length) {
                showToast('error', 'Pilih file backup terlebih dahulu!');
                return;
            }
            
            const file = fileInput.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    let data = e.target.result;
                    
                    // Dekripsi data jika password diberikan
                    if (password) {
                        // Implementasi dekripsi sederhana
                        data = atob(data);
                    }
                    
                    const parsedData = JSON.parse(data);
                    
                    // Validasi data
                    if (!Array.isArray(parsedData) || parsedData.length === 0 || !parsedData[0].hasOwnProperty('namaKUB')) {
                        throw new Error('Format file backup tidak valid!');
                    }
                    
                    // Simpan data
                    localStorage.setItem('barjasData', JSON.stringify(parsedData));
                    
                    // Reload data
                    loadData();
                    updateStats();
                    setupCharts();
                    
                    // Reset form
                    document.getElementById('restoreFile').value = '';
                    document.getElementById('restorePassword').value = '';
                    
                    showToast('success', 'Restore data berhasil!');
                } catch (error) {
                    console.error('Error restoring data:', error);
                    showToast('error', 'Gagal memulihkan data. Pastikan file backup valid dan password benar.');
                }
            };
            
            reader.readAsText(file);
        }
        
        // Simpan riwayat backup
        function saveBackupHistory(fileName, dataCount) {
            const history = JSON.parse(localStorage.getItem('backupHistory')) || [];
            const newEntry = {
                date: new Date().toISOString(),
                fileName: fileName,
                dataCount: dataCount,
                size: new Blob([localStorage.getItem('barjasData')]).size
            };
            
            history.unshift(newEntry);
            localStorage.setItem('backupHistory', JSON.stringify(history));
            
            // Update tampilan riwayat backup
            updateBackupHistory(history);
        }
        
        // Update tampilan riwayat backup
        function updateBackupHistory(history) {
            const historyElement = document.getElementById('backupHistory');
            historyElement.innerHTML = '';
            
            if (history.length === 0) {
                historyElement.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center py-3 text-muted">
                            Belum ada riwayat backup
                        </td>
                    </tr>
                `;
                return;
            }
            
            history.forEach(entry => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${new Date(entry.date).toLocaleDateString('id-ID')}</td>
                    <td>${entry.fileName}</td>
                    <td>${entry.dataCount} data</td>
                    <td>${(entry.size / 1024).toFixed(2)} KB</td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-download"></i>
                        </button>
                    </td>
                `;
                historyElement.appendChild(row);
            });
        }
        
        // Ekspor ke PDF
        function exportToPDF() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            
            if (data.length === 0) {
                showToast('error', 'Tidak ada data untuk diekspor!');
                return;
            }
            
            // Implementasi ekspor PDF menggunakan jsPDF
            // (kode untuk membuat PDF)
            
            showToast('success', 'Ekspor PDF berhasil!');
        }
        
        // Ekspor ke Excel
        function exportToExcel() {
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            
            if (data.length === 0) {
                showToast('error', 'Tidak ada data untuk diekspor!');
                return;
            }
            
            // Siapkan data untuk Excel
            const excelData = data.map(item => ({
                'Nama KUB': item.namaKUB,
                'Tahun Anggaran': item.tahunAnggaran,
                'NIK': item.nik,
                'Nama': item.nama,
                'Jabatan': item.jabatan,
                'WhatsApp': '+62' + item.whatsapp,
                'Alamat': item.alamat,
                'Jenis Bantuan': item.jenisBantuan,
                'Jumlah': item.jumlahBantuan,
                'Tanggal Input': new Date(item.tanggalInput).toLocaleDateString('id-ID')
            }));
            
            // Buat worksheet
            const ws = XLSX.utils.json_to_sheet(excelData);
            
            // Buat workbook
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, 'Data Bantuan');
            
            // Ekspor ke file
            XLSX.writeFile(wb, `data_bantuan_${new Date().toISOString().slice(0, 10)}.xlsx`);
            
            showToast('success', 'Ekspor Excel berhasil!');
        }
        
        // Bersihkan cache
        function clearCache() {
            // Hapus data yang tidak diperlukan dari localStorage
            const keysToKeep = ['barjasData', 'backupHistory', 'appSettings'];
            const allKeys = Object.keys(localStorage);
            
            allKeys.forEach(key => {
                if (!keysToKeep.includes(key)) {
                    localStorage.removeItem(key);
                }
            });
            
            showToast('success', 'Cache berhasil dibersihkan!');
        }
        
        // Periksa pembaruan
        function checkForUpdates() {
            // Simulasi pemeriksaan pembaruan
            showToast('info', 'Memeriksa pembaruan...');
            
            setTimeout(() => {
                showToast('success', 'Aplikasi sudah menggunakan versi terbaru!');
            }, 2000);
        }
        
        // Generate data contoh
        function generateSampleData() {
            const sampleData = [
                {
                    id: 1,
                    namaKUB: "KUB MAKMUR SEJAHTERA",
                    tahunAnggaran: 2025,
                    nik: "3509061209950001",
                    nama: "BUDI SANTOSO",
                    jabatan: "Ketua Kelompok",
                    whatsapp: "81234567890",
                    alamat: "Ds. Sumberanyar, Kec. Situbondo",
                    jenisBantuan: "Bantuan Bibit Ikan",
                    jumlahBantuan: "500",
                    catatan: "Bibit ikan nila",
                    tanggalInput: "2025-08-15T10:30:00.000Z"
                },
                {
                    id: 2,
                    namaKUB: "KUB TANI SUBUR",
                    tahunAnggaran: 2025,
                    nik: "3509062208940002",
                    nama: "SITI RAHAYU",
                    jabatan: "Sekretaris",
                    whatsapp: "82345678901",
                    alamat: "Ds. Patokan, Kec. Situbondo",
                    jenisBantuan: "Bantuan Pakan Ikan",
                    jumlahBantuan: "200",
                    catatan: "Pakan ikan 30% protein",
                    tanggalInput: "2025-08-14T14:20:00.000Z"
                },
                {
                    id: 3,
                    namaKUB: "KUB TERNAK MANDIRI",
                    tahunAnggaran: 2024,
                    nik: "3509061507930003",
                    nama: "AGUS PRIYANTO",
                    jabatan: "Ketua Kelompok",
                    whatsapp: "83456789012",
                    alamat: "Ds. Kapongan, Kec. Situbondo",
                    jenisBantuan: "Bantuan Bibit Ternak",
                    jumlahBantuan: "50",
                    catatan: "Bibit ayam kampung",
                    tanggalInput: "2024-07-20T09:15:00.000Z"
                }
            ];
            
            localStorage.setItem('barjasData', JSON.stringify(sampleData));
            
            // Reload data
            loadData();
            updateStats();
            setupCharts();
            
            showToast('success', 'Data contoh berhasil digenerate!');
        }
        
        // Optimasi penyimpanan
        function optimizeStorage() {
            // Kompres data (simulasi)
            const data = JSON.parse(localStorage.getItem('barjasData')) || [];
            localStorage.setItem('barjasData', JSON.stringify(data));
            
            showToast('success', 'Penyimpanan berhasil dioptimasi!');
        }
        
        // Tampilkan toast notifikasi
        function showToast(type, message) {
            const toastElement = type === 'success' ? 
                document.getElementById('successToast') : 
                document.getElementById('errorToast');
                
            toastElement.querySelector('.toast-body').textContent = message;
            
            const toast = new bootstrap.Toast(toastElement);
            toast.show();
        }
    </script>
</body>
</html>
